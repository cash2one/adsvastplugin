/**
 * AdsPlayerPlugin - v1.0.0 - 15:14:24 03-01-2019
 * Author: tungtm
 */

!function(){var t=void 0;!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(require("playercore"),require("react")):"function"==typeof t&&t.amd?t(["playercore","react"],n):n(e.vcplayerCore,e.React)}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}function i(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=It(e),this.reject=It(n)}function o(){}function a(t){return null===t}function s(t){return void 0!==t}function u(t){return"object"===(void 0===t?"undefined":wn(t))}function l(t){return"function"==typeof t}function c(t){return"number"==typeof t}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"string"==typeof t}function h(t){return p(t)&&0===t.length}function f(t){return p(t)&&0!==t.length}function v(t){return Array.prototype.slice.call(t)}function y(t,e,n){var r,i;if(t)if(l(t))for(r in t)"prototype"===r||"length"===r||"name"===r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(d(t)){var o="object"!==(void 0===t?"undefined":wn(t));for(r=0,i=t.length;r<i;r++)(o||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==y)t.forEach(e,n,t);else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);return t}function A(t){var e,n,r;for(n=1;n<arguments.length;n++){e=arguments[n];for(r in e)e.hasOwnProperty(r)&&(u(t[r])&&!a(t[r])&&u(e[r])?t[r]=A({},t[r],e[r]):t[r]=e[r])}return t}function g(t){return t.charAt(0).toUpperCase()+t.slice(1)}function _(t){return t.charAt(0).toLowerCase()+t.slice(1)}function E(t,e){var n=[];return t.forEach(function(t,r){var i=e(t,r);s(i)&&n.push(i)}),n}function m(t,e){var n=t+"";if(e=c(e)?e:0,t=c(t)?t:parseInt(t,10),c(t)&&!isNaN(t)){for(n=t+"";n.length<e;)n="0"+n;return n}return"NaN"}function T(t,e){var n=(new Date).getTime()-(e+1);return function(){var r=(new Date).getTime();r-n>=e&&(n=r,t.apply(this,arguments))}}function k(t){return c(t)&&(t+=""),!!p(t)&&ki.test(t.trim())}function S(){var t=P(navigator);return-1!==t&&t<10}function P(t){var e=-1;if("Microsoft Internet Explorer"==t.appName){var n=t.userAgent,r=new RegExp("MSIE ([0-9]{1,}\\.[0-9]{0,})").exec(n);null!==r&&(e=parseFloat(r[1]))}return e}function V(){}function I(t){var e=Ri[t];e&&(clearTimeout(e),delete Ri[t])}function R(t,e,n){var r=document.createElement("iframe");return r.src=e||"about:blank",r.marginWidth="0",r.marginHeight="0",r.frameBorder="0",r.width="100%",r.height="100%",b(r),n&&(r.style.zIndex=n),r.setAttribute("SCROLLING","NO"),t.innerHTML="",t.appendChild(r),r}function b(t){t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.margin="0px",t.style.padding="0px",t.style.border="none",t.style.width="100%",t.style.height="100%"}function D(t,e){return Object.keys(e).forEach(function(n){var r="object"==typeof r?JSON.stringify(e[n]):e[n];t=t.replace(new RegExp("{{"+n+"}}","g"),r)}),t}function L(t,e){var n=t.contentWindow&&t.contentWindow.document;return!!n&&(n.write(e),!0)}function w(t,e,n){}function C(t,e,n){Object.defineProperty(t,e,{writable:!1,configurable:!1,value:n})}function O(){this._subscribers={}}function N(t,e,n,r){this._isValid=Ui(t),this._isValid&&(this._creative=t,this._el=e,this._videoEl=n,this._iframe=r,this._subscribers=new Mi,bi.setFullSizeStyle(e),M.call(this))}function M(){if(Fi.forEach(function(t){this._creative.subscribe(x.bind(this,t),t)}.bind(this)),this._creative.subscribe(U.bind(this),ji),this._videoEl){var t=this._iframe.contentDocument.documentElement,e=this._videoEl;t.addEventListener("click",function(n){n.target===t&&e.click()})}}function U(t,e,n){this._subscribers.triggerSync(ji,{url:t,id:e,playerHandles:n})}function x(t){this._subscribers.trigger(t,Array.prototype.slice(arguments,1))}function j(t,e,n,r){t?t(n,r):n&&e.trigger(xi,n)}function F(t,e,n,r){n=n||{},this._id=Wi(),this._destroyed=!1,this._frameContainer=bi.createElementInEl(t,"div"),this._videoEl=e,this._vpaidOptions=r||{timeout:1e4},this._templateConfig={template:n.template||Hi,extraOptions:n.extraOptions||{}}}function z(t){var e=this[t];e&&(e.remove(),delete this[t])}function W(){B.call(this),delete this._adUnit}function H(){B.call(this),q.call(this)}function B(){z.call(this,"_frame"),G.call(this)}function G(){this._onLoad&&(window.removeEventListener("message",this._onLoad),bi.clearCallbackTimeout(this._onLoad),delete this._onLoad)}function q(){this._adUnit&&(this._adUnit.stopAd(),delete this._adUnit)}function K(){if(this._destroyed)throw new Error("VPAIDHTML5Client already destroyed!")}function Q(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function Y(t,e){e.forEach(function(e){t.push(e)})}function J(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function X(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function $(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function Z(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function tt(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function et(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function nt(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function rt(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var it="default"in t?t.default:t,ot="default"in e?e.default:e,at={}.toString,st=function(t){return at.call(t).slice(8,-1)},ut=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==st(t)?t.split(""):Object(t)},lt=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},ct=function(t){return ut(lt(t))},dt={f:{}.propertyIsEnumerable},pt=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ht=function(t){return"object"==typeof t?null!==t:"function"==typeof t},ft=function(t,e){if(!ht(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!ht(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!ht(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!ht(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},vt={}.hasOwnProperty,yt=function(t,e){return vt.call(t,e)},At=function(t){try{return!!t()}catch(t){return!0}},gt=!At(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_t=r(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Et=_t.document,mt=ht(Et)&&ht(Et.createElement),Tt=function(t){return mt?Et.createElement(t):{}},kt=!gt&&!At(function(){return 7!=Object.defineProperty(Tt("div"),"a",{get:function(){return 7}}).a}),St=Object.getOwnPropertyDescriptor,Pt={f:gt?St:function(t,e){if(t=ct(t),e=ft(e,!0),kt)try{return St(t,e)}catch(t){}if(yt(t,e))return pt(!dt.f.call(t,e),t[e])}},Vt=r(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),It=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},Rt=function(t,e,n){if(It(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},bt=function(t){if(!ht(t))throw TypeError(t+" is not an object!");return t},Dt=Object.defineProperty,Lt={f:gt?Object.defineProperty:function(t,e,n){if(bt(t),e=ft(e,!0),bt(n),kt)try{return Dt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},wt=gt?function(t,e,n){return Lt.f(t,e,pt(1,n))}:function(t,e,n){return t[e]=n,t},Ct=function(t,e,n){var r,i,o,a=t&Ct.F,s=t&Ct.G,u=t&Ct.S,l=t&Ct.P,c=t&Ct.B,d=t&Ct.W,p=s?Vt:Vt[e]||(Vt[e]={}),h=p.prototype,f=s?_t:u?_t[e]:(_t[e]||{}).prototype;s&&(n=e);for(r in n)(i=!a&&f&&void 0!==f[r])&&yt(p,r)||(o=i?f[r]:n[r],p[r]=s&&"function"!=typeof f[r]?n[r]:c&&i?Rt(o,_t):d&&f[r]==o?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(o):l&&"function"==typeof o?Rt(Function.call,o):o,l&&((p.virtual||(p.virtual={}))[r]=o,t&Ct.R&&h&&!h[r]&&wt(h,r,o)))};Ct.F=1,Ct.G=2,Ct.S=4,Ct.P=8,Ct.B=16,Ct.W=32,Ct.U=64,Ct.R=128;var Ot=Ct,Nt=function(t,e){var n=(Vt.Object||{})[t]||Object[t],r={};r[t]=e(n),Ot(Ot.S+Ot.F*At(function(){n(1)}),"Object",r)},Mt=Pt.f;Nt("getOwnPropertyDescriptor",function(){return function(t,e){return Mt(ct(t),e)}});var Ut=Vt.Object,xt=function(t,e){return Ut.getOwnPropertyDescriptor(t,e)},jt=n(r(function(t){t.exports={default:xt,__esModule:!0}})),Ft=Math.ceil,zt=Math.floor,Wt=function(t){return isNaN(t=+t)?0:(t>0?zt:Ft)(t)},Ht=wt,Bt={},Gt=Math.min,qt=function(t){return t>0?Gt(Wt(t),9007199254740991):0},Kt=Math.max,Qt=Math.min,Yt=function(t,e){return(t=Wt(t))<0?Kt(t+e,0):Qt(t,e)},Jt=r(function(t){var e=_t["__core-js_shared__"]||(_t["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:Vt.version,mode:"pure",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),Xt=0,$t=Math.random(),Zt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Xt+$t).toString(36))},te=Jt("keys"),ee=function(t){return te[t]||(te[t]=Zt(t))},ne=function(t){return function(e,n,r){var i,o=ct(e),a=qt(o.length),s=Yt(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}}(!1),re=ee("IE_PROTO"),ie=function(t,e){var n,r=ct(t),i=0,o=[];for(n in r)n!=re&&yt(r,n)&&o.push(n);for(;e.length>i;)yt(r,n=e[i++])&&(~ne(o,n)||o.push(n));return o},oe="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ae=Object.keys||function(t){return ie(t,oe)},se=gt?Object.defineProperties:function(t,e){bt(t);for(var n,r=ae(e),i=r.length,o=0;i>o;)Lt.f(t,n=r[o++],e[n]);return t},ue=_t.document,le=ue&&ue.documentElement,ce=ee("IE_PROTO"),de=function(){},pe=function(){var t,e=Tt("iframe"),n=oe.length;for(e.style.display="none",le.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),pe=t.F;n--;)delete pe.prototype[oe[n]];return pe()},he=Object.create||function(t,e){var n;return null!==t?(de.prototype=bt(t),n=new de,de.prototype=null,n[ce]=t):n=pe(),void 0===e?n:se(n,e)},fe=r(function(t){var e=Jt("wks"),n=_t.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:Zt)("Symbol."+t))}).store=e}),ve=Lt.f,ye=fe("toStringTag"),Ae=function(t,e,n){t&&!yt(t=n?t:t.prototype,ye)&&ve(t,ye,{configurable:!0,value:e})},ge={};wt(ge,fe("iterator"),function(){return this});var _e=function(t,e,n){t.prototype=he(ge,{next:pt(1,n)}),Ae(t,e+" Iterator")},Ee=function(t){return Object(lt(t))},me=ee("IE_PROTO"),Te=Object.prototype,ke=Object.getPrototypeOf||function(t){return t=Ee(t),yt(t,me)?t[me]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Te:null},Se=fe("iterator"),Pe=!([].keys&&"next"in[].keys()),Ve=function(){return this},Ie=function(t,e,n,r,i,o,a){_e(n,e,r);var s,u,l,c=function(t){if(!Pe&&t in f)return f[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},d=e+" Iterator",p="values"==i,h=!1,f=t.prototype,v=f[Se]||f["@@iterator"]||i&&f[i],y=v||c(i),A=i?p?c("entries"):y:void 0,g="Array"==e?f.entries||v:v;if(g&&(l=ke(g.call(new t)))!==Object.prototype&&l.next&&Ae(l,d,!0),p&&v&&"values"!==v.name&&(h=!0,y=function(){return v.call(this)}),a&&(Pe||h||!f[Se])&&wt(f,Se,y),Bt[e]=y,Bt[d]=Ve,i)if(s={values:p?y:c("values"),keys:o?y:c("keys"),entries:A},a)for(u in s)u in f||Ht(f,u,s[u]);else Ot(Ot.P+Ot.F*(Pe||h),e,s);return s},Re=function(t){return function(e,n){var r,i,o=String(lt(e)),a=Wt(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}(!0);Ie(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Re(e,n),this._i+=t.length,{value:t,done:!1})});var be=function(t,e){return{value:e,done:!!t}};Ie(Array,"Array",function(t,e){this._t=ct(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,be(1)):"keys"==e?be(0,n):"values"==e?be(0,t[n]):be(0,[n,t[n]])},"values");Bt.Arguments=Bt.Array;for(var De=fe("toStringTag"),Le="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),we=0;we<Le.length;we++){var Ce=Le[we],Oe=_t[Ce],Ne=Oe&&Oe.prototype;Ne&&!Ne[De]&&wt(Ne,De,Ce),Bt[Ce]=Bt.Array}var Me={f:fe},Ue=Me.f("iterator"),xe=r(function(t){t.exports={default:Ue,__esModule:!0}});n(xe);var je=r(function(t){var e=Zt("meta"),n=Lt.f,r=0,i=Object.isExtensible||function(){return!0},o=!At(function(){return i(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!ht(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!yt(t,e)){if(!i(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!yt(t,e)){if(!i(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return o&&s.NEED&&i(t)&&!yt(t,e)&&a(t),t}}}),Fe=Lt.f,ze=function(t){var e=Vt.Symbol||(Vt.Symbol={});"_"==t.charAt(0)||t in e||Fe(e,t,{value:Me.f(t)})},We={f:Object.getOwnPropertySymbols},He=function(t){var e=ae(t),n=We.f;if(n)for(var r,i=n(t),o=dt.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e},Be=Array.isArray||function(t){return"Array"==st(t)},Ge=oe.concat("length","prototype"),qe={f:Object.getOwnPropertyNames||function(t){return ie(t,Ge)}},Ke=qe.f,Qe={}.toString,Ye="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Je=function(t){try{return Ke(t)}catch(t){return Ye.slice()}},Xe={f:function(t){return Ye&&"[object Window]"==Qe.call(t)?Je(t):Ke(ct(t))}},$e=je.KEY,Ze=Pt.f,tn=Lt.f,en=Xe.f,nn=_t.Symbol,rn=_t.JSON,on=rn&&rn.stringify,an=fe("_hidden"),sn=fe("toPrimitive"),un={}.propertyIsEnumerable,ln=Jt("symbol-registry"),cn=Jt("symbols"),dn=Jt("op-symbols"),pn=Object.prototype,hn="function"==typeof nn,fn=_t.QObject,vn=!fn||!fn.prototype||!fn.prototype.findChild,yn=gt&&At(function(){return 7!=he(tn({},"a",{get:function(){return tn(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Ze(pn,e);r&&delete pn[e],tn(t,e,n),r&&t!==pn&&tn(pn,e,r)}:tn,An=function(t){var e=cn[t]=he(nn.prototype);return e._k=t,e},gn=hn&&"symbol"==typeof nn.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof nn},_n=function(t,e,n){return t===pn&&_n(dn,e,n),bt(t),e=ft(e,!0),bt(n),yt(cn,e)?(n.enumerable?(yt(t,an)&&t[an][e]&&(t[an][e]=!1),n=he(n,{enumerable:pt(0,!1)})):(yt(t,an)||tn(t,an,pt(1,{})),t[an][e]=!0),yn(t,e,n)):tn(t,e,n)},En=function(t,e){bt(t);for(var n,r=He(e=ct(e)),i=0,o=r.length;o>i;)_n(t,n=r[i++],e[n]);return t},mn=function(t){var e=un.call(this,t=ft(t,!0));return!(this===pn&&yt(cn,t)&&!yt(dn,t))&&(!(e||!yt(this,t)||!yt(cn,t)||yt(this,an)&&this[an][t])||e)},Tn=function(t,e){if(t=ct(t),e=ft(e,!0),t!==pn||!yt(cn,e)||yt(dn,e)){var n=Ze(t,e);return!n||!yt(cn,e)||yt(t,an)&&t[an][e]||(n.enumerable=!0),n}},kn=function(t){for(var e,n=en(ct(t)),r=[],i=0;n.length>i;)yt(cn,e=n[i++])||e==an||e==$e||r.push(e);return r},Sn=function(t){for(var e,n=t===pn,r=en(n?dn:ct(t)),i=[],o=0;r.length>o;)!yt(cn,e=r[o++])||n&&!yt(pn,e)||i.push(cn[e]);return i};hn||(Ht((nn=function(){if(this instanceof nn)throw TypeError("Symbol is not a constructor!");var t=Zt(arguments.length>0?arguments[0]:void 0),e=function(n){this===pn&&e.call(dn,n),yt(this,an)&&yt(this[an],t)&&(this[an][t]=!1),yn(this,t,pt(1,n))};return gt&&vn&&yn(pn,t,{configurable:!0,set:e}),An(t)}).prototype,"toString",function(){return this._k}),Pt.f=Tn,Lt.f=_n,qe.f=Xe.f=kn,dt.f=mn,We.f=Sn,Me.f=function(t){return An(fe(t))}),Ot(Ot.G+Ot.W+Ot.F*!hn,{Symbol:nn});for(var Pn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Vn=0;Pn.length>Vn;)fe(Pn[Vn++]);for(var In=ae(fe.store),Rn=0;In.length>Rn;)ze(In[Rn++]);Ot(Ot.S+Ot.F*!hn,"Symbol",{for:function(t){return yt(ln,t+="")?ln[t]:ln[t]=nn(t)},keyFor:function(t){if(!gn(t))throw TypeError(t+" is not a symbol!");for(var e in ln)if(ln[e]===t)return e},useSetter:function(){vn=!0},useSimple:function(){vn=!1}}),Ot(Ot.S+Ot.F*!hn,"Object",{create:function(t,e){return void 0===e?he(t):En(he(t),e)},defineProperty:_n,defineProperties:En,getOwnPropertyDescriptor:Tn,getOwnPropertyNames:kn,getOwnPropertySymbols:Sn}),rn&&Ot(Ot.S+Ot.F*(!hn||At(function(){var t=nn();return"[null]"!=on([t])||"{}"!=on({a:t})||"{}"!=on(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(ht(e)||void 0!==t)&&!gn(t))return Be(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!gn(e))return e}),r[1]=e,on.apply(rn,r)}}),nn.prototype[sn]||wt(nn.prototype,sn,nn.prototype.valueOf),Ae(nn,"Symbol"),Ae(Math,"Math",!0),Ae(_t.JSON,"JSON",!0),ze("asyncIterator"),ze("observable");var bn=Vt.Symbol,Dn=r(function(t){t.exports={default:bn,__esModule:!0}});n(Dn);var Ln=r(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(xe),i=n(Dn),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}}),wn=n(Ln);Nt("getPrototypeOf",function(){return function(t){return ke(Ee(t))}});var Cn=Vt.Object.getPrototypeOf,On=n(r(function(t){t.exports={default:Cn,__esModule:!0}})),Nn=Object.assign,Mn=!Nn||At(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Nn({},t)[n]||Object.keys(Nn({},e)).join("")!=r})?function(t,e){for(var n=Ee(t),r=arguments.length,i=1,o=We.f,a=dt.f;r>i;)for(var s,u=ut(arguments[i++]),l=o?ae(u).concat(o(u)):ae(u),c=l.length,d=0;c>d;)a.call(u,s=l[d++])&&(n[s]=u[s]);return n}:Nn;Ot(Ot.S+Ot.F,"Object",{assign:Mn});var Un=Vt.Object.assign,xn=r(function(t){t.exports={default:Un,__esModule:!0}});n(xn);var jn=n(r(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(xn);e.default=n.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}})),Fn=n(r(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}})),zn=n(r(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(Ln);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,n.default)(e))&&"function"!=typeof e?t:e}}));Ot(Ot.S+Ot.F*!gt,"Object",{defineProperty:Lt.f});var Wn=Vt.Object,Hn=function(t,e,n){return Wn.defineProperty(t,e,n)},Bn=r(function(t){t.exports={default:Hn,__esModule:!0}});n(Bn);var Gn=n(r(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(Bn);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()})),qn=function(t,e){if(bt(t),!ht(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Kn={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=Rt(Function.call,Pt.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return qn(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:qn};Ot(Ot.S,"Object",{setPrototypeOf:Kn.set});var Qn=Vt.Object.setPrototypeOf,Yn=r(function(t){t.exports={default:Qn,__esModule:!0}});n(Yn),Ot(Ot.S,"Object",{create:he});var Jn=Vt.Object,Xn=function(t,e){return Jn.create(t,e)},$n=r(function(t){t.exports={default:Xn,__esModule:!0}});n($n);var Zn=n(r(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(Yn),i=n($n),o=n(Ln);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}})),tr=r(function(t){!function(e){function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),s=new h(r||[]);return a._invoke=l(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(n,i,o,a){var s=r(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&g.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(l).then(function(t){u.value=t,o(u)},a)}a(s.arg)}var n;this._invoke=function(t,r){function i(){return new Promise(function(n,i){e(t,r,n,i)})}return n=n?n.then(i,i):i()}}function l(t,e,n){var i=S;return function(o,a){if(i===V)throw new Error("Generator is already running");if(i===I){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===R)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===S)throw i=I,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=V;var l=r(t,e,n);if("normal"===l.type){if(i=n.done?I:P,l.arg===R)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=I,n.method="throw",n.arg=l.arg)}}}function c(t,e){var n=t.iterator[e.method];if(n===y){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=y,c(t,e),"throw"===e.method))return R;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return R}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,R;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=y),e.delegate=null,R):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,R)}function d(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(d,this),this.reset(!0)}function f(t){if(t){var e=t[E];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=y,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:y,done:!0}}var y,A=Object.prototype,g=A.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},E=_.iterator||"@@iterator",m=_.asyncIterator||"@@asyncIterator",T=_.toStringTag||"@@toStringTag",k=e.regeneratorRuntime;if(k)t.exports=k;else{(k=e.regeneratorRuntime=t.exports).wrap=n;var S="suspendedStart",P="suspendedYield",V="executing",I="completed",R={},b={};b[E]=function(){return this};var D=Object.getPrototypeOf,L=D&&D(D(f([])));L&&L!==A&&g.call(L,E)&&(b=L);var w=a.prototype=i.prototype=Object.create(b);o.prototype=w.constructor=a,a.constructor=o,a[T]=o.displayName="GeneratorFunction",k.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},k.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,T in t||(t[T]="GeneratorFunction")),t.prototype=Object.create(w),t},k.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[m]=function(){return this},k.AsyncIterator=u,k.async=function(t,e,r,i){var o=new u(n(t,e,r,i));return k.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(w),w[T]="Generator",w[E]=function(){return this},w.toString=function(){return"[object Generator]"},k.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},k.values=f,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,R):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),R},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),R}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:f(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=y),R}}}}(function(){return this}()||Function("return this")())}),er=function(){return this}()||Function("return this")(),nr=er.regeneratorRuntime&&Object.getOwnPropertyNames(er).indexOf("regeneratorRuntime")>=0,rr=nr&&er.regeneratorRuntime;er.regeneratorRuntime=void 0;var ir=tr;if(nr)er.regeneratorRuntime=rr;else try{delete er.regeneratorRuntime}catch(t){er.regeneratorRuntime=void 0}var or,ar,sr,ur=ir,lr=fe("toStringTag"),cr="Arguments"==st(function(){return arguments}()),dr=function(t,e){try{return t[e]}catch(t){}},pr=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=dr(e=Object(t),lr))?n:cr?st(e):"Object"==(r=st(e))&&"function"==typeof e.callee?"Arguments":r},hr=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},fr=function(t,e,n,r){try{return r?e(bt(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&bt(i.call(t)),e}},vr=fe("iterator"),yr=Array.prototype,Ar=function(t){return void 0!==t&&(Bt.Array===t||yr[vr]===t)},gr=fe("iterator"),_r=Vt.getIteratorMethod=function(t){if(void 0!=t)return t[gr]||t["@@iterator"]||Bt[pr(t)]},Er=r(function(t){var e={},n={},r=t.exports=function(t,r,i,o,a){var s,u,l,c,d=a?function(){return t}:_r(t),p=Rt(i,o,r?2:1),h=0;if("function"!=typeof d)throw TypeError(t+" is not iterable!");if(Ar(d)){for(s=qt(t.length);s>h;h++)if((c=r?p(bt(u=t[h])[0],u[1]):p(t[h]))===e||c===n)return c}else for(l=d.call(t);!(u=l.next()).done;)if((c=fr(l,p,u.value,r))===e||c===n)return c};r.BREAK=e,r.RETURN=n}),mr=fe("species"),Tr=function(t,e){var n,r=bt(t).constructor;return void 0===r||void 0==(n=bt(r)[mr])?e:It(n)},kr=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},Sr=_t.process,Pr=_t.setImmediate,Vr=_t.clearImmediate,Ir=_t.MessageChannel,Rr=_t.Dispatch,br=0,Dr={},Lr=function(){var t=+this;if(Dr.hasOwnProperty(t)){var e=Dr[t];delete Dr[t],e()}},wr=function(t){Lr.call(t.data)};Pr&&Vr||(Pr=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Dr[++br]=function(){kr("function"==typeof t?t:Function(t),e)},or(br),br},Vr=function(t){delete Dr[t]},"process"==st(Sr)?or=function(t){Sr.nextTick(Rt(Lr,t,1))}:Rr&&Rr.now?or=function(t){Rr.now(Rt(Lr,t,1))}:Ir?(sr=(ar=new Ir).port2,ar.port1.onmessage=wr,or=Rt(sr.postMessage,sr,1)):_t.addEventListener&&"function"==typeof postMessage&&!_t.importScripts?(or=function(t){_t.postMessage(t+"","*")},_t.addEventListener("message",wr,!1)):or="onreadystatechange"in Tt("script")?function(t){le.appendChild(Tt("script")).onreadystatechange=function(){le.removeChild(this),Lr.call(t)}}:function(t){setTimeout(Rt(Lr,t,1),0)});var Cr={set:Pr,clear:Vr},Or=Cr.set,Nr=_t.MutationObserver||_t.WebKitMutationObserver,Mr=_t.process,Ur=_t.Promise,xr="process"==st(Mr),jr={f:function(t){return new i(t)}},Fr=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},zr=_t.navigator,Wr=zr&&zr.userAgent||"",Hr=function(t,e){if(bt(t),ht(e)&&e.constructor===t)return e;var n=jr.f(t);return(0,n.resolve)(e),n.promise},Br=fe("species"),Gr=fe("iterator"),qr=!1;try{[7][Gr]().return=function(){qr=!0}}catch(t){}var Kr,Qr,Yr,Jr,Xr=function(t,e){if(!e&&!qr)return!1;var n=!1;try{var r=[7],i=r[Gr]();i.next=function(){return{done:n=!0}},r[Gr]=function(){return i},t(r)}catch(t){}return n},$r=Cr.set,Zr=function(){var t,e,n,r=function(){var r,i;for(xr&&(r=Mr.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(xr)n=function(){Mr.nextTick(r)};else if(!Nr||_t.navigator&&_t.navigator.standalone)if(Ur&&Ur.resolve){var i=Ur.resolve(void 0);n=function(){i.then(r)}}else n=function(){Or.call(_t,r)};else{var o=!0,a=document.createTextNode("");new Nr(r).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),ti=_t.TypeError,ei=_t.process,ni=ei&&ei.versions,ri=ni&&ni.v8||"",ii=_t.Promise,oi="process"==pr(ei),ai=function(){},si=Qr=jr.f,ui=!!function(){try{var t=ii.resolve(1),e=(t.constructor={})[fe("species")]=function(t){t(ai,ai)};return(oi||"function"==typeof PromiseRejectionEvent)&&t.then(ai)instanceof e&&0!==ri.indexOf("6.6")&&-1===Wr.indexOf("Chrome/66")}catch(t){}}(),li=function(t){var e;return!(!ht(t)||"function"!=typeof(e=t.then))&&e},ci=function(t,e){if(!t._n){t._n=!0;var n=t._c;Zr(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&hi(t),t._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===e.promise?l(ti("Promise-chain cycle")):(o=li(n))?o.call(n,u,l):u(n)):l(r)}catch(t){c&&!a&&c.exit(),l(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&di(t)})}},di=function(t){$r.call(_t,function(){var e,n,r,i=t._v,o=pi(t);if(o&&(e=Fr(function(){oi?ei.emit("unhandledRejection",i,t):(n=_t.onunhandledrejection)?n({promise:t,reason:i}):(r=_t.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=oi||pi(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},pi=function(t){return 1!==t._h&&0===(t._a||t._c).length},hi=function(t){$r.call(_t,function(){var e;oi?ei.emit("rejectionHandled",t):(e=_t.onrejectionhandled)&&e({promise:t,reason:t._v})})},fi=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),ci(e,!0))},vi=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw ti("Promise can't be resolved itself");(e=li(t))?Zr(function(){var r={_w:n,_d:!1};try{e.call(t,Rt(vi,r,1),Rt(fi,r,1))}catch(t){fi.call(r,t)}}):(n._v=t,n._s=1,ci(n,!1))}catch(t){fi.call({_w:n,_d:!1},t)}}};ui||(ii=function(t){hr(this,ii,"Promise","_h"),It(t),Kr.call(this);try{t(Rt(vi,this,1),Rt(fi,this,1))}catch(t){fi.call(this,t)}},(Kr=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:wt(t,r,e[r]);return t}(ii.prototype,{then:function(t,e){var n=si(Tr(this,ii));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=oi?ei.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&ci(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Yr=function(){var t=new Kr;this.promise=t,this.resolve=Rt(vi,t,1),this.reject=Rt(fi,t,1)},jr.f=si=function(t){return t===ii||t===Jr?new Yr(t):Qr(t)}),Ot(Ot.G+Ot.W+Ot.F*!ui,{Promise:ii}),Ae(ii,"Promise"),function(t){var e="function"==typeof Vt[t]?Vt[t]:_t[t];gt&&e&&!e[Br]&&Lt.f(e,Br,{configurable:!0,get:function(){return this}})}("Promise"),Jr=Vt.Promise,Ot(Ot.S+Ot.F*!ui,"Promise",{reject:function(t){var e=si(this);return(0,e.reject)(t),e.promise}}),Ot(Ot.S+!0*Ot.F,"Promise",{resolve:function(t){return Hr(this===Jr?ii:this,t)}}),Ot(Ot.S+Ot.F*!(ui&&Xr(function(t){ii.all(t).catch(ai)})),"Promise",{all:function(t){var e=this,n=si(e),r=n.resolve,i=n.reject,o=Fr(function(){var n=[],o=0,a=1;Er(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=si(e),r=n.reject,i=Fr(function(){Er(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),Ot(Ot.P+Ot.R,"Promise",{finally:function(t){var e=Tr(this,Vt.Promise||_t.Promise),n="function"==typeof t;return this.then(n?function(n){return Hr(e,t()).then(function(){return n})}:t,n?function(n){return Hr(e,t()).then(function(){throw n})}:t)}}),Ot(Ot.S,"Promise",{try:function(t){var e=jr.f(this),n=Fr(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var yi,Ai,gi=Vt.Promise,_i=r(function(t){t.exports={default:gi,__esModule:!0}}),Ei=n(_i),mi=n(r(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(_i);e.default=function(t){return function(){var e=t.apply(this,arguments);return new n.default(function(t,r){function i(o,a){try{var s=e[o](a),u=s.value}catch(t){return void r(t)}if(!s.done)return n.default.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});t(u)}return i("next")})}}})),Ti=(Ai=yi=function(){function e(t){Fn(this,e),this.state={},this._validProps(t),this._initProps(t)}return Gn(e,[{key:"getDefaultProps",value:function(){return this.constructor.defaultProps}},{key:"setState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.state||{};this.state=jn({},n,e),t.log.stateInfo({label:this.constructor.name,prevState:n,nextState:e})}},{key:"updateProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props||{};this.props=jn({},e,t)}},{key:"_initProps",value:function(t){var e=this.getDefaultProps(t);this.props=jn({},e,t)}},{key:"_validProps",value:function(e){var n=this.constructor.propTypes;t.PropTypes.checkPropTypes(n,e,"prop",this.constructor.name)}}]),e}(),yi.propTypes={},yi.defaultProps={},Ai),ki=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([.,]\d+(?!:))?)?(\17[0-5]\d([.,]\d+)?)?([zZ]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Si=function(){function t(){Fn(this,t)}return Gn(t,null,[{key:"addClass",value:function(t,e){var n;if(f(e)){if(t.classList)return t.classList.add(e);n=p(t.getAttribute("class"))?t.getAttribute("class").split(/\s+/):[],p(e)&&f(e.replace(/\s+/,""))&&(n.push(e),t.setAttribute("class",n.join(" ")))}}},{key:"addEventListener",value:function(e,n,r){d(e)?y(e,function(e){t.addEventListener(e,n,r)}):d(n)?y(n,function(n){t.addEventListener(e,n,r)}):e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent("on"+n,r)}},{key:"remove",value:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"removeEventListener",value:function(e,n,r){d(e)?y(e,function(e){t.removeEventListener(e,n,r)}):d(n)?y(n,function(n){t.removeEventListener(e,n,r)}):e.removeEventListener?e.removeEventListener(n,r,!1):e.detachEvent?e.detachEvent("on"+n,r):e["on"+n]=null}},{key:"isDomElement",value:function(t){return t instanceof Element}},{key:"getDimension",value:function(t){var e;return!S()&&t.getBoundingClientRect?(e=t.getBoundingClientRect(),{width:e.width,height:e.height}):{width:t.offsetWidth,height:t.offsetHeight}}}]),t}(),Pi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments[2];Fn(this,t),this.code=e,this.msg=n,r&&(this.data=r)}return Gn(t,[{key:"extendsWithData",value:function(t){var e=this.code,n=this.msg;return new Error(e,n,t)}}]),t}(),Vi=function(t,e){return new Pi(t,e)},Ii={ERROR_DF_99:Vi(99,"timeout while waiting for the video to start playing"),ERROR_100:Vi(100,"VASTClient, error parsing xml"),ERROR_102:Vi(102,"VASTClient, not supported VAST version"),ERROR_301:Vi(301,"VASTClient, request ad tag url error"),ERROR_303:Vi(303,"VASTClient, no Ad in VAST tree"),ERROR_402:Vi(402,"timeout while waiting for the video to start playing"),VPAIDHTML5TECH_INVALID_MEDIA_FILE:Vi(700,"Invalid MediaFile"),VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL:Vi(701,"Invalid container HtmlElement"),VPAIDHTML5TECH_INVALID_DOM_VIDEO_EL:Vi(702,"Invalid HTMLVideoElement"),VPAIDHTML5TECH_MISSING_CALLBACK:Vi(702,"Missing valid callback"),VASTTRACKER_ASSET_URI:Vi(110,"VASTTracker, missing required the URI of the ad asset being played"),VASTTRACKER_VAST_RESPONSE:Vi(111,"VASTTracker, missing required VAST response"),VASTClIENT_MISS_AD_TAG_URL:Vi(120,"VASTClient, missing ad tag URL"),VASTClIENT_RESQUEST_AD_TAG_URL_ERROR:Vi(121,"VASTClient, request ad tag url error"),VASTClIENT_NO_AD_IN_VAST_TREE:Vi(303,"VASTClient, no Ad in VAST tree"),VASTClIENT_NOT_SUPPORT_VAST_VERSION:Vi(102,"VASTClient, not supported VAST version"),VASTClIENT_PARSING_XML_ERROR:Vi(100,"VASTClient, error parsing xml"),VASTClIENT_WRAPPER_LIMIT_REACHED:Vi(302,"VASTClient, players wrapper limit reached"),VASTClIENT_AD_TYPE_NOT_SUPPORT:Vi(200,"VASTClient, received an Ad type that is not supported"),VASTClIENT_MISSING_DURATION:Vi(101,"VASTClient, missing duration field in VAST response"),VASTClIENT_MISSING_OFFSET_TRACKING:Vi(101,"VASTClient, missing or wrong offset attribute on progress tracking event"),VALID_AD_ERROR_1:Vi(101,"VASTClient, InLine and Wrapper both found on the same Ad"),VALID_AD_ERROR_2:Vi(101,"VASTClient, nor wrapper nor inline elements found on the Ad"),VALID_AD_ERROR_3:Vi(403,"VASTClient, could not find MediaFile that is supported by this video player"),VALID_AD_ERROR_4:Vi(133,'VASTClient, missing "VASTAdTagURI" in wrapper'),VAST_INTEGRATOR_SOURCE_ERROR:Vi(403,"VASTIntegrator, Could not find Ad mediafile supported by this player"),VPAID_INTEGRATOR_NOT_SUPPORT_MEDIAFILE:Vi(150,"VPAIDIntegrator, Could not find a supported mediaFile"),VPAID_INTEGRATOR_HANDSHAKE_NOT_SUPPORT_VERSION:Vi(151,"VPAIDIntegrator handshake, unsupported version"),VPAID_INTEGRATOR_ERROR_WHILE_WAITING_FINISH:Vi(152," VPAIDIntegrator, error while waiting for the adUnit to finish playing"),VPAID_INTEGRATOR_ERROR_WHILE_INIT:Vi(153," VPAIDIntegrator, error while waiting init adUnit"),VPAID_AD_UNIT_WRAPPER_AD_UNIT_NOT_FULLY:Vi(160,"VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface"),VPAID_AD_UNIT_WRAPPER_METHOD_TIMEOUT:Vi(161," VPAIDAdUnitWrapper, timeout while waiting for a response on call method"),VPAID_AD_UNIT_WRAPPER_INVALID_METHOD_NAME:Vi(162," VPAIDAdUnitWrapper, invalid method name"),VPAID_AD_UNIT_WRAPPER_MISSING_CALLBACK:Vi(163," VPAIDAdUnitWrapper, missing callback"),VPAID_AD_UNIT_WRAPPER_EVENT_TIMEOUT:Vi(601," VPAIDAdUnitWrapper, timeout while waiting for event"),VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_NAME:Vi(165," VPAIDAdUnitWrapper, missing event name"),VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_CALLBACK:Vi(166," VPAIDAdUnitWrapper, missing event callback")},Ri={},bi={noop:V,validate:function(t,e){return t?null:new Error(e)},clearCallbackTimeout:I,callbackTimeout:function(t,e,n){var r,i;return i=setTimeout(function(){e=V,delete i[r],n()},t),r=function(){e.apply(this,arguments)&&I(r)},Ri[r]=i,r},createElementInEl:function(t,e,n){var r=document.createElement(e);return n&&(r.id=n),t.appendChild(r),r},createIframeWithContent:function(t,e,n){var r=R(t,null,n.zIndex);if(L(r,D(e,n)))return r},createIframe:R,setFullSizeStyle:b,simpleTemplate:D,setIframeContent:L,extend:function(t,e){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},unique:function(t){var e=-1;return function(){return t+"_"+ ++e}}},Di=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],Li=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],wi=["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"],Ci=["setAdVolume"];w.prototype.handshakeVersion=function(t,e){},w.prototype.initAd=function(t,e,n,r,i,o,a){},w.prototype.startAd=function(t){},w.prototype.stopAd=function(t){},w.prototype.skipAd=function(t){},w.prototype.resizeAd=function(t,e,n,r){},w.prototype.pauseAd=function(t){},w.prototype.resumeAd=function(t){},w.prototype.expandAd=function(t){},w.prototype.collapseAd=function(t){},w.prototype.subscribe=function(t,e,n){},w.prototype.unsubscribe=function(t,e){},w.prototype.getAdLinear=function(t){},w.prototype.getAdWidth=function(t){},w.prototype.getAdHeight=function(t){},w.prototype.getAdExpanded=function(t){},w.prototype.getAdSkippableState=function(t){},w.prototype.getAdRemainingTime=function(t){},w.prototype.getAdDuration=function(t){},w.prototype.getAdVolume=function(t){},w.prototype.getAdCompanions=function(t){},w.prototype.getAdIcons=function(t){},w.prototype.setAdVolume=function(t,e){},C(w,"METHODS",Di),C(w,"GETTERS",wi),C(w,"SETTERS",Ci),C(w,"EVENTS",Li);var Oi=Di.filter(function(t){return-1===["skipAd"].indexOf(t)});C(w,"checkVPAIDInterface",function(t){return Oi.every(function(e){return"function"==typeof t[e]})});var Ni=w;O.prototype.subscribe=function(t,e,n){this.isHandlerAttached(t,e)||this.get(e).push({handler:t,context:n,eventName:e})},O.prototype.unsubscribe=function(t,e){this._subscribers[e]=this.get(e).filter(function(e){return t!==e.handler})},O.prototype.unsubscribeAll=function(){this._subscribers={}},O.prototype.trigger=function(t,e){var n=this;this.get(t).concat(this.get("*")).forEach(function(t){setTimeout(function(){n.isHandlerAttached(t.handler,t.eventName)&&t.handler.call(t.context,e)},0)})},O.prototype.triggerSync=function(t,e){this.get(t).concat(this.get("*")).forEach(function(t){t.handler.call(t.context,e)})},O.prototype.get=function(t){return this._subscribers[t]||(this._subscribers[t]=[]),this._subscribers[t]},O.prototype.isHandlerAttached=function(t,e){return this.get(e).some(function(e){return t===e.handler})};var Mi=O,Ui=Ni.checkVPAIDInterface,xi="AdError",ji="AdClickThru",Fi=Ni.EVENTS.filter(function(t){return t!=ji});(N.prototype=Object.create(Ni.prototype)).isValidVPAIDAd=function(){return this._isValid},Ni.METHODS.forEach(function(t){-1===["subscribe","unsubscribe","initAd"].indexOf(t)&&(N.prototype[t]=function(){var e=Ni.prototype[t].length,n=Array.prototype.slice.call(arguments),r=e===n.length?n.pop():void 0;setTimeout(function(){var e,i=null;try{e=this._creative[t].apply(this._creative,n)}catch(t){i=t}j(r,this._subscribers,i,e)}.bind(this),0)})}),N.prototype.initAd=function(t,e,n,r,i,o,a){i=i||{},o=bi.extend({slot:this._el,videoSlot:this._videoEl},o||{}),setTimeout(function(){var s;try{this._creative.initAd(t,e,n,r,i,o)}catch(t){s=t}j(a,this._subscribers,s)}.bind(this),0)},N.prototype.subscribe=function(t,e,n){this._subscribers.subscribe(e,t,n)},N.prototype.unsubscribe=function(t,e){this._subscribers.unsubscribe(e,t)},N.prototype.on=N.prototype.subscribe,N.prototype.off=N.prototype.unsubscribe,Ni.GETTERS.forEach(function(t){N.prototype[t]=function(e){setTimeout(function(){var n,r=null;try{n=this._creative[t]()}catch(t){r=t}j(e,this._subscribers,r,n)}.bind(this),0)}}),N.prototype.setAdVolume=function(t,e){setTimeout(function(){var n,r=null;try{this._creative.setAdVolume(t),n=this._creative.getAdVolume()}catch(t){r=t}r||(r=bi.validate(n===t,"failed to apply volume: "+t)),j(e,this._subscribers,r,n)}.bind(this),0)},N.prototype._destroy=function(){this.stopAd(),this._subscribers.unsubscribeAll()};var zi=N,Wi=bi.unique("vpaidIframe"),Hi='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>',Bi="AdStopped";F.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,H.call(this))},F.prototype.isDestroyed=function(){return this._destroyed},F.prototype.loadAdUnit=function(t,e){K.call(this),H.call(this);var n=this,r=bi.createIframeWithContent(this._frameContainer,this._templateConfig.template,bi.extend({iframeURL_JS:t,iframeID:this.getID(),origin:Q()},this._templateConfig.extraOptions));this._frame=r,this._onLoad=bi.callbackTimeout(this._vpaidOptions.timeout,function(t){if(t.origin===Q()&&JSON.parse(t.data).id===n.getID()){var r,i,o;if(n._frame.contentWindow?(o=n._frame.contentWindow.getVPAIDAd,i=bi.validate("function"==typeof o,"the ad didn't return a function to create an ad")):i="the iframe is not anymore in the DOM tree",!i){var a=n._frame.contentWindow.document.querySelector(".ad-element");(r=new zi(o(),a,n._videoEl,n._frame)).subscribe(Bi,W.bind(n)),i=bi.validate(r.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return n._adUnit=r,G.call(n),e(i,i?null:r),!0}}.bind(this),function(){e("timeout",null)}.bind(this)),window.addEventListener("message",this._onLoad)},F.prototype.unloadAdUnit=function(){H.call(this)},F.prototype.getID=function(){return this._id};var Gi,qi,Ki,Qi,Yi=F,Ji=(qi=Gi=function(){function e(t){if(Fn(this,e),!t||!p(t.src))throw Ii.VPAIDHTML5TECH_INVALID_MEDIA_FILE;this.name="vpaid-html5",this.containerEl=null,this.videoEl=null,this.vpaidHTMLClient=null,this.mediaFile=t}return Gn(e,[{key:"loadAdUnit",value:function(t,e,n){if(!Si.isDomElement(t))throw Ii.VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL;if(!Si.isDomElement(e)||"video"!==e.tagName.toLowerCase())throw Ii.VPAIDHTML5TECH_INVALID_DOM_CONTAINER_EL;if(!l(n))throw Ii.VPAIDHTML5TECH_MISSING_CALLBACK;this.containerEl=t,this.videoEl=e,this.vpaidHTMLClient=new Yi(t,e,{}),this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src,n)}},{key:"unloadAdUnit",value:function(){if(this.vpaidHTMLClient){try{this.vpaidHTMLClient.destroy()}catch(e){t.log.error("VAST ERROR: trying to unload the VPAID adunit")}this.vpaidHTMLClient=null}this.containerEl&&(Si.remove(this.containerEl),this.containerEl=null)}}],[{key:"supports",value:function(t){return!S()&&this.types.indexOf(t)>-1}}]),e}(),Gi.types=["text/javascript","text/javascript1.0","text/javascript1.2","text/javascript1.4","text/jscript","application/javascript","application/x-javascript","text/ecmascript","text/ecmascript1.0","text/ecmascript1.2","text/ecmascript1.4","text/livescript","application/ecmascript","application/x-ecmascript"],qi),Xi=(Qi=Ki=function(){function t(){Fn(this,t)}return Gn(t,null,[{key:"track",value:function(t,e){var n=[];return this.parseURLMacros(t,e).forEach(function(t){var e=new Image;e.src=t,n.push(e)}),n}},{key:"parseURLMacros",value:function(t,e){var n=this,r=[];return(e=e||{}).CACHEBUSTING||(e.CACHEBUSTING=Math.round(1e10*Math.random())),t.forEach(function(t){t&&r.push(n._parseURLMacro(t,e))}),r}},{key:"parseURLMacro",value:function(t,e){return(e=e||{}).CACHEBUSTING||(e.CACHEBUSTING=Math.round(1e10*Math.random())),this._parseURLMacro(t,e)}},{key:"parseDuration",value:function(t){var e,n,r=/(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;return p(t)&&(e=t.match(r))&&(n=function(t){return 60*parseInt(t,10)*60*1e3}(e[1])+function(t){return 60*parseInt(t,10)*1e3}(e[2])+function(t){return 1e3*parseInt(t,10)}(e[3])+parseInt(e[5]||0)),isNaN(n)?null:n}},{key:"parseImpressions",value:function(t){return t?(t=d(t)?t:[t],E(t,function(t){if(f(t.keyValue))return t.keyValue})):[]}},{key:"formatProgress",value:function(t){var e,n,r,i;return e=t/36e5,e=Math.floor(e),n=t/6e4%60,n=Math.floor(n),r=t/1e3%60,r=Math.floor(r),i=t%1e3,m(e,2)+":"+m(n,2)+":"+m(r,2)+"."+m(i,3)}},{key:"parseOffset",value:function(t,e){function n(t,e){return t*e/100}return function(t){return/^\d+(\.\d+)?%$/g.test(t)}(t)?function(t,e){return e?n(e,parseFloat(t.replace("%",""))):null}(t,e):this.parseDuration(t)}},{key:"isVPAID",value:function(t){return!!t&&"VPAID"===t.apiFramework}},{key:"findSupportedVPAIDTech",value:function(t){var e,n,r;for(e=0,n=this.VPAID_techs.length;e<n;e+=1)if((r=this.VPAID_techs[e]).supports(t))return r;return null}},{key:"isFlashSupported",value:function(){return!1}},{key:"_parseURLMacro",value:function(t,e){return e=e||{},y(e,function(e,n){t=t.replace(new RegExp("\\["+n+"\\]","gm"),e)}),t}}]),t}(),Ki.VPAID_techs=[Ji],Qi),$i=function(){function t(e){Fn(this,t);var n=Zi.parseText;if(e.documentElement)return new t(e.documentElement);if(e.hasChildNodes()){for(var r,i,o,a="",s=0;s<e.childNodes.length;s++)3==((r=e.childNodes.item(s)).nodeType-1|1)?a+=3===r.nodeType?r.nodeValue.trim():r.nodeValue:1!==r.nodeType||r.prefix||(i=_(r.nodeName),o=new t(r),this.hasOwnProperty(i)?(this[i].constructor!==Array&&(this[i]=[this[i]]),this[i].push(o)):this[i]=o);a&&(this.keyValue=n(a))}if(void 0===e.hasAttributes?e.attributes.length>0:e.hasAttributes())for(var u,l=0;l<e.attributes.length;l++)this["@"+_((u=e.attributes.item(l)).name)]=n(u.value.trim())}return Gn(t,[{key:"attr",value:function(t){return this["@"+_(t)]}}]),t}(),Zi=function(){function t(){Fn(this,t)}return Gn(t,null,[{key:"strToXMLDoc",value:function(t){function e(t){try{var e=(new DOMParser).parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===e?t.getElementsByTagName("parsererror").length>0:t.getElementsByTagNameNS(e,"parsererror").length>0}catch(t){}}if(void 0===window.DOMParser){var n=new ActiveXObject("Microsoft.XMLDOM");return n.async=!1,n.loadXML(t),n}return function(t){var n,r=new DOMParser;try{if(n=r.parseFromString(t,"application/xml"),e(n)||h(t))throw new Error}catch(e){throw new Error("xml.strToXMLDOC: Error parsing the string: "+t)}return n}(t)}},{key:"parseText",value:function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):k(t)?new Date(t):t.trim()}},{key:"toJXONTree",value:function(e){var n=t.strToXMLDoc(e);return new $i(n)}},{key:"keyValue",value:function(t){if(t)return t.keyValue}},{key:"attr",value:function(t,e){if(t)return t["@"+_(e)]}},{key:"encode",value:function(t){if(p(t))return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}},{key:"decode",value:function(t){if(p(t))return t.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}}]),t}(),to=function t(e,n){Fn(this,t),this.name=e.attr("event"),this.uri=Zi.keyValue(e),"progress"===this.name&&(this.offset=Xi.parseOffset(e.attr("offset"),n))},eo=["delivery","type","width","height","codec","id","bitrate","minBitrate","maxBitrate","scalable","maintainAspectRatio","apiFramework"],no=function(){function t(e){Fn(this,t),this.src=Zi.keyValue(e);for(var n=0;n<eo.length;n++){var r=eo[n];this[r]=e.attr(r)}"video/x-mp4"===this.type&&(this.type="video/mp4")}return Gn(t,[{key:"isSupported",value:function(){return Xi.isVPAID(this)?!!Xi.findSupportedVPAIDTech(this.type):"video/x-flv"!==this.type||Xi.isFlashSupported()}}]),t}(),ro=function(){function t(e){Fn(this,t),this.clickThrough=Zi.keyValue(e.clickThrough),this.clickTrackings=this._parseClickTrackings(e.clickTracking),this.customClicks=this._parseClickTrackings(e.customClick)}return Gn(t,[{key:"_parseClickTrackings",value:function(t){var e=[];return t&&(t=d(t)?t:[t]).forEach(function(t){e.push(Zi.keyValue(t))}),e}}]),t}(),io=function(){function t(e){Fn(this,t),this.duration=Xi.parseDuration(Zi.keyValue(e.duration)),this.mediaFiles=this._parseMediaFiles(e.mediaFiles&&e.mediaFiles.mediaFile),this.trackingEvents=this._parseTrackingEvents(e.trackingEvents&&e.trackingEvents.tracking,this.duration),this.skipoffset=Xi.parseOffset(Zi.attr(e,"skipoffset"),this.duration),e.videoClicks&&(this.videoClicks=new ro(e.videoClicks)),e.adParameters&&(this.adParameters=Zi.keyValue(e.adParameters),Zi.attr(e.adParameters,"xmlEncoded")&&(this.adParameters=Zi.decode(this.adParameters)))}return Gn(t,[{key:"_parseMediaFiles",value:function(t){var e=[];return s(t)&&(t=d(t)?t:[t]).forEach(function(t){e.push(new no(t))}),e}},{key:"_parseTrackingEvents",value:function(t,e){var n=[];return s(t)&&(t=d(t)?t:[t]).forEach(function(t){n.push(new to(t,e))}),n}},{key:"isSupported",value:function(){var t,e;for(t=0,e=this.mediaFiles.length;t<e;t+=1)if(this.mediaFiles[t].isSupported())return!0;return!1}}]),t}(),oo=function(){function e(n){Fn(this,e),t.log.info("<Companion> found companion ad"),t.log.debug("<Companion>  companionJTree:",n),this.creativeType=Zi.attr(n.staticResource,"creativeType"),this.staticResource=Zi.keyValue(n.staticResource),t.log.info("<Companion>  creativeType: "+this.creativeType),t.log.info("<Companion>  staticResource: "+this.staticResource);var r=null;Zi.keyValue(n.HTMLResource)?r=Zi.keyValue(n.HTMLResource):Zi.keyValue(n.hTMLResource)&&(r=Zi.keyValue(n.hTMLResource)),null!==r&&t.log.info("<Companion> found html resource",r),this.htmlResource=r;var i=null;Zi.keyValue(n.IFrameResource)?i=Zi.keyValue(n.IFrameResource):Zi.keyValue(n.iFrameresource)&&(i=Zi.keyValue(n.iFrameresource)),null!==i&&t.log.info("<Companion> found iframe resource",i),this.iframeResource=i,this.id=Zi.attr(n,"id"),this.width=Zi.attr(n,"width"),this.height=Zi.attr(n,"height"),this.expandedWidth=Zi.attr(n,"expandedWidth"),this.expandedHeight=Zi.attr(n,"expandedHeight"),this.scalable=Zi.attr(n,"scalable"),this.maintainAspectRatio=Zi.attr(n,"maintainAspectRatio"),this.minSuggestedDuration=Zi.attr(n,"minSuggestedDuration"),this.apiFramework=Zi.attr(n,"apiFramework"),this.companionClickThrough=Zi.keyValue(n.companionClickThrough),this.trackingEvents=this._parseTrackingEvents(n.trackingEvents&&n.trackingEvents.tracking),t.log.info("<Companion>  companionClickThrough: "+this.companionClickThrough)}return Gn(e,[{key:"_parseTrackingEvents",value:function(t){var e=[];return s(t)&&(t=d(t)?t:[t]).forEach(function(t){e.push(new to(t))}),e}}]),e}(),ao=function(){function t(e){if(Fn(this,t),this.id=e.attr("id"),this.sequence=e.attr("sequence"),this.adId=e.attr("adId"),this.apiFramework=e.attr("apiFramework"),e.linear&&(this.linear=new io(e.linear)),e.companionAds){var n=[],r=e.companionAds&&e.companionAds.companion;s(r)&&(r=d(r)?r:[r]).forEach(function(t){n.push(new oo(t))}),this.companionAds=n}}return Gn(t,[{key:"isSupported",value:function(){return!this.linear||this.linear.isSupported()}}],[{key:"parseCreatives",value:function(e){var n=[];return s(e)&&s(e.creative)&&(d(e.creative)?e.creative:[e.creative]).forEach(function(e){n.push(new t(e))}),n}}]),t}(),so=function(){function t(e){Fn(this,t),this.adTitle=Zi.keyValue(e.adTitle),this.adSystem=Zi.keyValue(e.adSystem),this.impressions=Xi.parseImpressions(e.impression),this.creatives=ao.parseCreatives(e.creatives),this.description=Zi.keyValue(e.description),this.advertiser=Zi.keyValue(e.advertiser),this.surveys=this._parseSurveys(e.survey),this.error=Zi.keyValue(e.error),this.pricing=Zi.keyValue(e.pricing),this.extensions=e.extensions}return Gn(t,[{key:"_parseSurveys",value:function(t){return t?E(d(t)?t:[t],function(t){if(f(t.keyValue))return{uri:t.keyValue,type:t.attr("type")}}):[]}},{key:"isSupported",value:function(){var t,e;if(0===this.creatives.length)return!1;for(t=0,e=this.creatives.length;t<e;t+=1)if(!this.creatives[t].isSupported())return!1;return!0}}]),t}(),uo=function t(e){Fn(this,t),this.adSystem=Zi.keyValue(e.adSystem),this.impressions=Xi.parseImpressions(e.impression),this.VASTAdTagURI=Zi.keyValue(e.vASTAdTagURI),this.creatives=ao.parseCreatives(e.creatives),this.error=Zi.keyValue(e.error),this.extensions=e.extensions,this.followAdditionalWrappers=!s(Zi.attr(e,"followAdditionalWrappers"))||Zi.attr(e,"followAdditionalWrappers"),this.allowMultipleAds=Zi.attr(e,"allowMultipleAds"),this.fallbackOnNoAd=Zi.attr(e,"fallbackOnNoAd")},lo=function(){function t(e){Fn(this,t),this._initialize(e)}return Gn(t,[{key:"_initialize",value:function(t){this.id=t.attr("id"),this.sequence=t.attr("sequence"),t.inLine&&(this.inLine=new so(t.inLine)),t.wrapper&&(this.wrapper=new uo(t.wrapper))}}]),t}(),co=function(){function t(){Fn(this,t),this._linearAdded=!1,this.ads=[],this.errorURLMacros=[],this.impressions=[],this.clickTrackings=[],this.customClicks=[],this.trackingEvents={},this.mediaFiles=[],this.clickThrough=void 0,this.adTitle="",this.duration=void 0,this.skipoffset=void 0}return Gn(t,[{key:"addAd",value:function(t){var e,n;t instanceof lo&&(e=t.inLine,n=t.wrapper,this.ads.push(t),e&&this._addInLine(e),n&&this._addWrapper(n))}},{key:"_addErrorTrackUrl",value:function(t){var e=t instanceof $i?Zi.keyValue(t):t;e&&this.errorURLMacros.push(e)}},{key:"_addImpressions",value:function(t){d(t)&&Y(this.impressions,t)}},{key:"_addClickThrough",value:function(t){f(t)&&(this.clickThrough=t)}},{key:"_addClickTrackings",value:function(t){d(t)&&Y(this.clickTrackings,t)}},{key:"_addCustomClicks",value:function(t){d(t)&&Y(this.customClicks,t)}},{key:"_addTrackingEvents",value:function(t){var e=this.trackingEvents;t&&(t=d(t)?t:[t]).forEach(function(t){e[t.name]||(e[t.name]=[]),e[t.name].push(t)})}},{key:"_addTitle",value:function(t){f(t)&&(this.adTitle=t)}},{key:"_addDuration",value:function(t){c(t)&&(this.duration=t)}},{key:"_addVideoClicks",value:function(t){t instanceof ro&&(this._addClickThrough(t.clickThrough),this._addClickTrackings(t.clickTrackings),this._addCustomClicks(t.customClicks))}},{key:"_addMediaFiles",value:function(t){d(t)&&Y(this.mediaFiles,t)}},{key:"_addSkipoffset",value:function(t){t&&(this.skipoffset=t)}},{key:"_addAdParameters",value:function(t){t&&(this.adParameters=t)}},{key:"_addLinear",value:function(t){t instanceof io&&(this._addDuration(t.duration),this._addTrackingEvents(t.trackingEvents),this._addVideoClicks(t.videoClicks),this._addMediaFiles(t.mediaFiles),this._addSkipoffset(t.skipoffset),this._addAdParameters(t.adParameters),this._linearAdded=!0)}},{key:"_addInLine",value:function(t){var e=this;t instanceof so&&(this._addTitle(t.adTitle),this._addErrorTrackUrl(t.error),this._addImpressions(t.impressions),t.creatives.forEach(function(t){t.linear&&e._addLinear(t.linear)}))}},{key:"_addWrapper",value:function(t){var e=this;t instanceof uo&&(this._addErrorTrackUrl(t.error),this._addImpressions(t.impressions),t.creatives.forEach(function(t){var n=t.linear;n&&(e._addVideoClicks(n.videoClicks),e.clickThrough=void 0,e._addTrackingEvents(n.trackingEvents))}))}},{key:"hasLinear",value:function(){return this._linearAdded}}]),t}(),po=function(){function t(e,n){Fn(this,t),this._sanityCheck(e,n),this._initialize(e,n)}return Gn(t,[{key:"_sanityCheck",value:function(t,e){if(!p(t)||h(t))throw Ii.VASTTRACKER_ASSET_URI;if(!(e instanceof co))throw Ii.VASTTRACKER_VAST_RESPONSE}},{key:"_initialize",value:function(t,e){this.response=e,this.assetURI=t,this.progress=0,this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*e.duration)/100},midpoint:{tracked:!1,time:Math.round(50*e.duration)/100},thirdQuartile:{tracked:!1,time:Math.round(75*e.duration)/100}}}},{key:"durationChange",value:function(t){this.quartiles={firstQuartile:{tracked:!1,time:Math.round(25*t)/100},midpoint:{tracked:!1,time:Math.round(50*t)/100},thirdQuartile:{tracked:!1,time:Math.round(75*t)/100}}}},{key:"trackURLs",value:function(t,e){d(t)&&t.length>0&&(e=A({ASSETURI:this.assetURI,CONTENTPLAYHEAD:Xi.formatProgress(this.progress)},e||{}),Xi.track(t,e))}},{key:"trackEvent",value:function(t,e){this.trackURLs(this._getEventUris(this.response.trackingEvents[t])),e&&(this.response.trackingEvents[t]=void 0)}},{key:"trackProgress",value:function(t){function e(t,e,n){a[t]&&n&&i.push({name:t,trackOnce:!!e})}function n(t,e){var n=t.time;return e>=n&&e<=n+5e3}var r=this,i=[],o=!0,a=this.response.trackingEvents;c(t)&&(e("start",o,t>0),e("rewind",!1,function(e,n){return e>t&&Math.abs(n-e)>3e3}(this.progress,t)),function(t){function i(t,r){var i=a[t];n(i,r)&&(i.tracked=!0,e(t,o,!0))}var a=r.quartiles,s=r.quartiles.firstQuartile,u=r.quartiles.midpoint,l=r.quartiles.thirdQuartile;s.tracked?u.tracked?l.tracked||i("thirdQuartile",t):i("midpoint",t):i("firstQuartile",t)}(t),function(t){if(d(a.progress)){var e=[];a.progress.forEach(function(n){n.offset<=t?r.trackURLs([n.uri]):e.push(n)}),a.progress=e}}(t),i.forEach(function(t){r.trackEvent(t.name,t.trackOnce)}),this.progress=t)}},{key:"trackComplete",value:function(){this.quartiles.thirdQuartile.tracked&&this.trackEvent("complete",!0)}},{key:"trackErrorWithCode",value:function(t){c(t)&&this.trackURLs(this.response.errorURLMacros,{ERRORCODE:t})}},{key:"trackImpressions",value:function(){this.trackURLs(this.response.impressions)}},{key:"trackCreativeView",value:function(){this.trackEvent("creativeView")}},{key:"trackClick",value:function(){this.trackURLs(this.response.clickTrackings)}},{key:"_getEventUris",value:function(t){var e;return t&&(e=[],t.forEach(function(t){t.uri&&e.push(t.uri)})),e}}]),t}();["rewind","fullscreen","exitFullscreen","pause","resume","mute","unmute","acceptInvitation","acceptInvitationLinear","collapse","expand"].forEach(function(t){po.prototype["track"+g(t)]=function(){this.trackEvent(t)}}),["start","skip","close","closeLinear"].forEach(function(t){po.prototype["track"+g(t)]=function(){this.trackEvent(t,!0)}}),["firstQuartile","midpoint","thirdQuartile"].forEach(function(t){po.prototype["track"+g(t)]=function(){this.quartiles[t].tracked=!0,this.trackEvent(t,!0)}});var ho,fo,vo,yo,Ao,go,_o=function(){function t(){Fn(this,t)}return Gn(t,null,[{key:"once",value:function(t,e,n){function r(){for(var i=0;i<e.length;i++)t.off(e[i],r);n.apply(null,arguments)}e.forEach(function(e){t.on(e,r)})}}]),t}(),Eo=t.playerconfig.DEFAULT,mo=(fo=ho=function(t){function e(t){Fn(this,e);var n=zn(this,(e.__proto__||On(e)).call(this,t)),r=n.props.player;return n.createAdVideoEl(),n._dispose=n._dispose.bind(n),r.on(Eo.EVENT.AD_END,n._dispose),r.on(Eo.EVENT.USER_SKIP_AD,n._dispose),r.on(Eo.EVENT.VAST_AD_VIDEO_COMPLETE,n._dispose),r.on(Eo.EVENT.VPAID_AD_VIDEO_COMPLETE,n._dispose),n}return Zn(e,Ti),Gn(e,[{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off(Eo.EVENT.AD_END,this._dispose),t.off(Eo.EVENT.USER_SKIP_AD,this._dispose),t.off(Eo.EVENT.VAST_AD_VIDEO_COMPLETE,this._dispose),t.off(Eo.EVENT.VPAID_AD_VIDEO_COMPLETE,this._dispose)}},{key:"_dispose",value:function(){var t=this.state.videoEl,e=this.props.player;Si.remove(t),t=null,e.overlay.getElementsByClassName("overlay-ad")[0].style.opacity="0"}},{key:"createAdVideoEl",value:function(){var t=this.props.player,e=document.createElement("video");e.style.display="none",Si.addClass(e,"VideoEl-container"),t.overlay.getElementsByClassName("overlay-ad")[0].append(e),this.setState({videoEl:e}),e.addEventListener("playing",function(){e.style.display="block",t.overlay.getElementsByClassName("overlay-ad")[0].style.opacity="1"})}},{key:"src",value:function(t){this.state.videoEl.src=t.src}},{key:"on",value:function(t,e){this.state.videoEl.addEventListener(t,e)}},{key:"off",value:function(t,e){this.state.videoEl.removeEventListener(t,e)}},{key:"currentTime",value:function(){return this.state.videoEl.currentTime}},{key:"duration",value:function(){return this.state.videoEl.duration}},{key:"load",value:function(){this.state.videoEl.load()}},{key:"volume",value:function(t){var e=this.state.videoEl;if("number"!=typeof t)return e.volume;e.volume=t}},{key:"paused",value:function(){return this.state.videoEl.paused}},{key:"play",value:function(){var t=this.state.videoEl;this.props.player.trigger("play"),t.play()}},{key:"pause",value:function(){var t=this.state.videoEl;this.props.player.trigger("pause"),t.pause()}},{key:"preload",value:function(t){this.state.videoEl.preload=t}},{key:"muted",value:function(t){var e=this.state.videoEl;return void 0!==t&&(e.muted=t),e.muted}}]),e}(),ho.propTypes={player:t.PropTypes.object.isRequired},fo),To=(yo=vo=function(e){function n(t){Fn(this,n);var e=zn(this,(n.__proto__||On(n)).call(this,t));return e.selectPlayerAd(),e}return Zn(n,Ti),Gn(n,[{key:"createAdVideoEl",value:function(){var t=this.props.player;return new mo({player:t})}},{key:"selectPlayerAd",value:function(){var e=this.props.player,n=void 0;n=t.agent.isIOS?e:this.createAdVideoEl(),this.setState({PlayerAdUnit:n})}},{key:"getPlayerAdUnit",value:function(){var t=this.state.PlayerAdUnit;if(t)return t}}]),n}(),vo.propTypes={player:t.PropTypes.object.isRequired},yo),ko=t.playerconfig.DEFAULT,So=function(e){function n(t){Fn(this,n);var e=zn(this,(n.__proto__||On(n)).call(this,t));return e.type="VAST",e.state={tracker:null,duration:null,orderPlay:!1,firstAdVideoStart:!1,canPlay:!1},e.props.player.one(ko.EVENT.AD_END,e._handleAdEnd),e}return Zn(n,Ti),Gn(n,[{key:"_handleAdEnd",value:function(){}},{key:"playAd",value:function(t){var e=this;return this.setState({vastResponse:t}),this._start().then(function(){return e._createAdPlayer()}).then(function(){return e._selectAdSource()}).then(function(){return e._createVASTTracker()}).then(function(){return e._addClickThrough()}).then(function(){return e._addSkipButton()}).then(function(){return e._setupEvents()}).then(function(){return e._playSelectedAd()}).catch(function(t){throw e._trackError(t),t})}},{key:"_createAdPlayer",value:function(){var t=this,e=this.props.player;return new Ei(function(n){var r=new To({player:e});t.setState({playerAdUnit:r.getPlayerAdUnit()}),n()})}},{key:"getPlayerAdUnit",value:function(){return this.state.playerAdUnit}},{key:"_start",value:function(){return new Ei(function(t){t()})}},{key:"_selectAdSource",value:function(){var e=void 0,n=this.props.player,r=this.state.vastResponse,i=Si.getDimension(n.el()).width;if(r.mediaFiles.sort(function(t,e){return Math.abs(i-t.width)-Math.abs(i-e.width)}),e=n.selectSource(r.mediaFiles).source)return t.log.info("selected source: ",e),this._adUnit&&(this._adUnit._src=e),void this.setState({source:e});throw Ii.VAST_INTEGRATOR_SOURCE_ERROR}},{key:"_createVASTTracker",value:function(){var t=this.state,e=t.source,n=t.vastResponse,r=new po(e.src,n);this.setState({tracker:r})}},{key:"_addClickThrough",value:function(){function t(t,e){var n={ASSETURI:r.src,CONTENTPLAYHEAD:Xi.formatProgress(1e3*e.currentTime())};return t?Xi.parseURLMacro(t,n):"#"}var e=this.props.player,n=this.state,r=n.source,i=n.vastResponse,o=n.playerAdUnit,a=function(e,n,r){try{var i=t(e.clickThrough,n);r.container.ad.clickThrough.updateBlocker(i)}catch(t){}}.bind(null,i,o,e);o.on("timeupdate",a)}},{key:"_addSkipButton",value:function(){}},{key:"_setupEvents",value:function(){function t(){a.isFullscreen()?u.trackFullscreen():u.trackExitFullscreen()}function e(){Math.abs(l.duration()-l.currentTime())<2||(u.trackPause(),_o.once(a,[ko.EVENT.VAST_AD_RESUME,ko.EVENT.AD_END,ko.EVENT.AD_CANCEL],function(t){t.type===ko.EVENT.VAST_AD_RESUME&&u.trackResume()}))}function n(){var t=1e3*l.currentTime();u.trackProgress(t)}function r(){u.trackImpressions(),u.trackCreativeView()}function i(){var t=l.volume(),e=l.muted();0===t||e?u.trackMute():u.trackUnmute()}function o(){var t=l.duration();isNaN(t)||u.durationChange(1e3*t)}var a=this.props.player,s=this.state,u=s.tracker,l=s.playerAdUnit;a.on("fullscreenchange",t),a.on(ko.EVENT.VAST_AD_VIDEO_START,r),a.on(ko.EVENT.VAST_AD_START,function(){l.off("durationchange",o)}),l.on("durationchange",function(){l.on("pause",e),l.on("timeupdate",n),l.on("volumechange",i),l.on("durationchange",o),l.on("play",function(){a.trigger(ko.EVENT.VAST_AD_RESUME)}),o()}),_o.once(a,[ko.EVENT.AD_END,ko.EVENT.AD_CANCEL,ko.EVENT.AD_SKIP],function(){a.off("fullscreenchange",t),a.off(ko.EVENT.VAST_AD_VIDEO_START,r),l.off("pause",e),l.off("timeupdate",n),l.off("volumechange",i),l.off("durationchange",o)}),_o.once(a,[ko.EVENT.AD_END,ko.EVENT.AD_CANCEL,ko.EVENT.AD_SKIP],function(t){t.type===ko.EVENT.AD_END&&u.trackComplete()})}},{key:"_playSelectedAd",value:function(){var t=this,e=this.props,n=e.player,r=e.type,i=e.preLoaded,o=this.state,a=o.playerAdUnit,s=o.orderPlay,u=o.firstAdVideoStart,l=o.canPlay,c=o.source,d=n.vastAd;return new Ei(function(e,o){function p(){n.off(ko.EVENT.AD_SKIP,h),n.off("play",y),n.off("timeupdate",v),n.off(ko.EVENT.AD_ORDER_START_MIDROLL,A),n.off(ko.EVENT.AD_ORDER_START_POSTROLL,A),a.off("ended",h)}function h(t){"ended"===t.type&&a.duration()-a.currentTime()>3||(p(),"ended"!==t.type&&t.type!==ko.EVENT.AD_SKIP||(n.trigger(ko.EVENT.VAST_AD_VIDEO_COMPLETE),e()))}function f(){l?(n.trigger(ko.EVENT.AD_PLAY,d.state.vastResponse),n.trigger(ko.EVENT.VAST_AD_START),n.trigger(ko.EVENT.AD_START,d),n.play()):s=!0}function v(){n.vastAd._prepareForAd(),n.vastAd.firstAd=!0,f()}function y(){n.one("timeupdate",A)}function A(){n.trigger("snapshotPlayer"),v()}if(a.on("error",function(){p(),o("Error! Something went wrong")}),a.on("loadedmetadata",function(){s&&!l&&(l=!0,f()),l=!0}),a.on("playing",function(){u||(t._vastAdVideoStart(),u=!0)}),a.on("ended",h),n.on(ko.EVENT.AD_CANCEL,h),n.on(ko.EVENT.AD_SKIP,h),!i&&!n.vastAd.firstAd)return n.vastAd._setUpRestorePlayer(),n.trigger("snapshotPlayer"),a.preload("auto"),a.src(c),void v();n.vastAd.firstAd?f():(n.vastAd._setUpRestorePlayer(),a.preload("auto"),a.src(c),"preroll"===r?(a.load(),n.one("play",y)):"midroll"===r?(a.load(),n.one(ko.EVENT.AD_ORDER_START_MIDROLL,A),n.trigger("prepareMidrollVastSuccess")):"postroll"===r&&(a.load(),n.one(ko.EVENT.AD_ORDER_START_POSTROLL,A),n.trigger("preparePostrollSuccess")))})}},{key:"_vastAdVideoStart",value:function(){this.props.player.trigger(ko.EVENT.VAST_AD_VIDEO_START)}},{key:"getAdDuration",value:function(){var t=this.state.playerAdUnit.duration();return Ei.resolve(t)}},{key:"getSkipOffSet",value:function(){var t=this.props.skipoffset;if(t)return t}},{key:"_trackError",value:function(t){var e=this.state.vastResponse;Xi.track(e.errorURLMacros,{ERRORCODE:t.code||900})}},{key:"getAdRemainingTime",value:function(){var t=this.state.playerAdUnit,e=t.duration()-t.currentTime();return Ei.resolve(e)}},{key:"getAdVolume",value:function(){var t=this.state.playerAdUnit.volume();return Ei.resolve(t)}},{key:"skipAd",value:function(){var t=this.props.player,e=this.state.tracker;t&&e&&(e.trackSkip(),t.trigger(ko.EVENT.AD_SKIP))}},{key:"pauseAd",value:function(){var t=this.props.player;this.state.playerAdUnit.pause(!0),t.trigger(ko.EVENT.AD_PAUSE_AD)}},{key:"resumeAd",value:function(){var t=this.props.player;this.state.playerAdUnit.play(!0),t.trigger(ko.EVENT.AD_RESUME_AD)}},{key:"clickThrough",value:function(){var t=this.props.player,e=this.state.tracker;t&&e&&(t.trigger(ko.EVENT.VAST_AD_CLICK_THRU),e.trackClick())}},{key:"setAdVolume",value:function(t){this.state.playerAdUnit.volume(t)}},{key:"isPaused",value:function(){return this.state.playerAdUnit.paused()}}]),n}(),Po=["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPlaying","AdLog","AdError"],Vo=(go=Ao=function(t){function e(t){Fn(this,e);var n=zn(this,(e.__proto__||On(e)).call(this,t)),r=n.props,i=r.adUnit,o=r.player;if(!i||!n._checkVPAIDInterface(i))throw Ii.VPAID_AD_UNIT_WRAPPER_AD_UNIT_NOT_FULLY;return Po.forEach(function(t){this.on(t,function(){o.trigger("ads.log",t)})}.bind(n)),n}return Zn(e,Ti),Gn(e,[{key:"_checkVPAIDInterface",value:function(t){for(var e=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","expandAd","collapseAd"],n=0,r=e.length;n<r;n++)if(!t||!l(t[e[n]]))return!1;return function(t){return l(t.subscribe)||l(t.addEventListener)||l(t.on)}(t)&&function(t){return l(t.unsubscribe)||l(t.removeEventListener)||l(t.off)}(t)}},{key:"adUnitAsyncCall",value:function(){var t,e=this.props,n=e.adUnit,r=e.responseTimeout,i=v(arguments),a=i.shift(),s=i.pop();!function(t,e,n){if(!p(t)||!l(n[t]))throw Ii.VPAID_AD_UNIT_WRAPPER_INVALID_METHOD_NAME.extendsWithData({method:t});if(!l(e))throw Ii.VPAID_AD_UNIT_WRAPPER_MISSING_CALLBACK.extendsWithData({method:t})}(a,s,n),i.push(function(){t&&clearTimeout(t),s.apply(this,arguments)}),n[a].apply(n,i),t=setTimeout(function(){t=null,s(Ii.VPAID_AD_UNIT_WRAPPER_METHOD_TIMEOUT.extendsWithData({method:a})),s=o},r)}},{key:"on",value:function(t,e){var n=this.props.adUnit;(n.addEventListener||n.subscribe||n.on).call(n,t,e)}},{key:"off",value:function(t,e){var n=this.props.adUnit;(n.removeEventListener||n.unsubscribe||n.off).call(n,t,e)}},{key:"waitForEvent",value:function(t,e,n,r){var i=this.props.responseTimeout,a=void 0;!function(t,e){if(!p(t))throw Ii.VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_NAME.extendsWithData({event:t});if(!l(e))throw Ii.VPAID_AD_UNIT_WRAPPER_MISSING_EVENT_CALLBACK.extendsWithData({event:t})}(t,e),n=n||null,this.on(t,function(){var t=v(arguments);a&&(clearTimeout(a),a=null),t.unshift(null),e.apply(n,t)}),a=setTimeout(function(){e(Ii.VPAID_AD_UNIT_WRAPPER_EVENT_TIMEOUT.extendsWithData({event:t})),a=null,e=o},r||i)}},{key:"handshakeVersion",value:function(t,e){this.adUnitAsyncCall("handshakeVersion",t,e)}},{key:"initAd",value:function(t,e,n,r,i,o){var a=this.props.adUnit,s=!1,u=!1;this.waitForEvent("AdLoaded",function(){u||(s=!0,o.apply(null,arguments))}),this.on("AdError",function(t){s||(u=!0,o(t))}),a.initAd(t,e,n,r,i,{iframe:a._iframe})}},{key:"resizeAd",value:function(t,e,n,r){this.adUnitAsyncCall("resizeAd",t,e,n,r)}},{key:"startAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdStarted",t),e.startAd()}},{key:"stopAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdStopped",t,null,300),e.stopAd()}},{key:"pauseAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdPaused",t),e.pauseAd()}},{key:"resumeAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdPlaying",t),e.resumeAd()}},{key:"expandAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdExpandedChange",t),e.expandAd()}},{key:"collapseAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdExpandedChange",t),e.collapseAd()}},{key:"skipAd",value:function(t){var e=this.props.adUnit;this.waitForEvent("AdSkipped",t,null,300),e.skipAd()}},{key:"setAdVolume",value:function(t,e){this.adUnitAsyncCall("setAdVolume",t,e)}}]),e}(),Ao.propTypes={adUnit:t.PropTypes.object.isRequired,player:t.PropTypes.object.isRequired,responseTimeout:t.PropTypes.number.isRequired,src:t.PropTypes.string.isRequired},go);["adLinear","adWidth","adHeight","adExpanded","adSkippableState","adRemainingTime","adDuration","adVolume","adCompanions","adIcons"].forEach(function(t){var e="get"+g(t);Vo.prototype[e]=function(t){this.adUnitAsyncCall(e,t)}});var Io,Ro,bo,Do=t.playerconfig.DEFAULT,Lo=(bo=Ro=function(e){function n(t){Fn(this,n);var e=zn(this,(n.__proto__||On(n)).call(this,t));e.type="VPAID",e.VIEW_MODE={NORMAL:"normal",FULLSCREEN:"fullscreen",THUMBNAIL:"thumbnail"},e.state={ended:!1,duration:null};var r=e.props.player;return e.containerEl=e._createVPAIDContainerEl(r),r.one("vpaid:AdEnd",e._handleAdEnd),r.one(Do.EVENT.AD_END,e._handleAdEnd),e}return Zn(n,Ti),Gn(n,[{key:"_handleAdEnd",value:function(){t.log.debug("<VPAIDIntegrator._handleAdEnd>");var e=this.state.tech;e&&e.unloadAdUnit(),this.containerEl&&(Si.remove(this.containerEl),this.containerEl=null)}},{key:"playAd",value:function(t){var e=this,n=this.props.player;return this.setState({vastResponse:t}),this._start().then(function(){return e._createAdPlayer()}).then(function(){return e._findSupportedTech()}).then(function(){return e._loadAdUnit()}).then(function(){return e._playAdUnit()}).then(function(){var t=n.vastAd.state.restorePlayer.state.snapshot,r=t.muted?0:t.volume;return e.setAdVolume(r),e._finishPlaying()}).catch(function(t){throw e._trackError(t),t})}},{key:"_createAdPlayer",value:function(){var t=this,e=this.props.player;return new Ei(function(n){var r=new To({player:e});t.setState({playerAdUnit:r.getPlayerAdUnit()}),n()})}},{key:"getSkipOffSet",value:function(){var t=this.props.skipoffset;if(t)return t}},{key:"skipAd",value:function(){var t=this.props.player,e=this.state,n=e.tracker,r=e.adUnit;t&&n&&(n.trackSkip(),r.skipAd(function(e){e&&t.trigger("vpaid-skip-ad-error",e)}))}},{key:"getAdVolume",value:function(){var t=this.state.adUnit;return new Ei(function(e,n){t.getAdVolume(function(t,r){if(t)return n(t);e(r)})})}},{key:"getAdExpanded",value:function(){var t=this.state.adUnit;return new Ei(function(e,n){t.getAdExpanded(function(t,r){t&&n(t),e(r)})})}},{key:"setAdVolume",value:function(t){this.state.adUnit.setAdVolume(t,this._logError)}},{key:"pauseAd",value:function(){var t=this.props.player;t.trigger("vpaid.pauseAd"),t.pause(!0),t.trigger(Do.EVENT.AD_PAUSE_AD)}},{key:"resumeAd",value:function(){var t=this.props.player;t.trigger("vpaid.resumeAd"),t.trigger(Do.EVENT.AD_RESUME_AD)}},{key:"isPaused",value:function(){return this.state.paused}},{key:"getSrc",value:function(){return this.state.tech.mediaFile}},{key:"techName",value:function(){return this.state.tech.name}},{key:"getAdRemainingTime",value:function(){var t=this.state.adUnit;return new Ei(function(e,n){t.getAdRemainingTime(function(t,r){if(t)return n(t);e(r)})})}},{key:"getAdDuration",value:function(){var t=this.state,e=t.adUnit,n=t.duration;return n?Ei.resolve(n):new Ei(function(t,n){e.getAdDuration(function(e,r){if(e)return n(e);t(r)})})}},{key:"_createVPAIDContainerEl",value:function(){var t=this.props.player,e=document.createElement("div");return e.style.display="none",Si.addClass(e,"VPAID-container"),t.overlay.append(e),e}},{key:"_start",value:function(){return new Ei(function(t){t()})}},{key:"_findSupportedTech",value:function(){for(var e=this.state.vastResponse.mediaFiles.filter(Xi.isVPAID),n=[],r=void 0,i=0,o=e.length;i<o;i+=1){var a=e[i],s=Xi.findSupportedVPAIDTech(a.type);s&&n.push({mediaFile:a,tech:s})}if(n.length){var u=n[0];r=new u.tech(u.mediaFile,this.props)}if(r)return t.log.info("<VPAIDIntegrator.playAd> found tech: ",r),void this.setState({tech:r});throw Ii.VPAID_INTEGRATOR_NOT_SUPPORT_MEDIAFILE}},{key:"getPlayerAdUnit",value:function(){return this.state.playerAdUnit}},{key:"_loadAdUnit",value:function(){t.log.debug("<VPAIDIntegrator._loadAdUnit>");var e=this,n=this.props,r=n.player,i=n.responseTimeout,o=this.state,a=o.tech,s=o.playerAdUnit,u=void 0;return u=t.agent.isIOS?s.el().querySelector(".vjs-tech"):s.state.videoEl,new Ei(function(n,o){a.loadAdUnit(e.containerEl,u,function(s,u){if(s)return t.log.debug("<VPAIDIntegrator._loadAdUnit> error: ",s),void o(s);try{u=e._createVPAIDAdUnitWrapper(u,a.mediaFile.src,i),r.trigger(a.name+"-ad"),e.setState({adUnit:u}),t.log.debug("<VPAIDIntegrator._loadAdUnit> success"),n()}catch(e){t.log.debug("<VPAIDIntegrator._loadAdUnit> error: ",s),o(s)}})})}},{key:"_playAdUnit",value:function(){t.log.debug("<VPAIDIntegrator._playAdUnit>");var e=this;return this._start().then(function(){return e._handshake()}).then(function(){return e._setupEvents()}).then(function(){return e._initAd()}).then(function(){return e._addSkipButton()}).then(function(){return e._addMuteButton()}).then(function(){return e._linkPlayerControls()}).then(function(){return e._playVideoEl()}).then(function(){return e._startAd()})}},{key:"_playVideoEl",value:function(){var t=this.props,e=t.preLoaded,n=t.type,r=t.player;return new Ei(function(t){function i(){t()}function o(){r.vastAd._setUpRestorePlayer(),r.trigger("snapshotPlayer"),r.vastAd._prepareForAd(),r.trigger(Do.EVENT.AD_START,r.vastAd),r.vastAd.firstAd=!0,i()}e||r.vastAd.firstAd?r.vastAd.firstAd?i():"preroll"===n?r.one("play",function(){r.one("timeupdate",o)}):"midroll"===n?(r.one(Do.EVENT.AD_ORDER_START_MIDROLL,o),r.trigger("prepareMidrollVastSuccess")):"postroll"===n&&(r.one(Do.EVENT.AD_ORDER_START_POSTROLL,o),r.one(Do.EVENT.PLAYER_ENDED_CONTEND,function(){r.trigger("preparePostrollSuccess")})):o()})}},{key:"_handshake",value:function(){function e(t){var e=n(t);return e>=1&&e<=2}function n(t){var e=t.split(".");return parseInt(e[0],10)}t.log.debug("<VPAIDIntegrator._handshake>");var r=this.state.adUnit,i=this.props.VPAID_VERSION;return new Ei(function(t,n){r.handshakeVersion(i,function(r,i){r?n(r):i&&e(i)?t():n(Ii.VPAID_INTEGRATOR_HANDSHAKE_NOT_SUPPORT_VERSION)})})}},{key:"_initAd",value:function(){t.log.debug("<VPAIDIntegrator._initAd>");var e=this,n=this.state,r=n.adUnit,i=n.vastResponse,o=this.props.player,a=o.el().querySelector(".vjs-tech"),s=Si.getDimension(a);return new Ei(function(t,n){r.initAd(s.width,s.height,e.VIEW_MODE.NORMAL,-1,{AdParameters:i.adParameters||"",playerID:o.id_},function(r){r?n(Ii.VPAID_INTEGRATOR_ERROR_WHILE_INIT.extendsWithData({error:r})):(e.setState({inited:!0}),t())})})}},{key:"_setupEvents",value:function(){function e(){a.isPaused()&&a.setState({paused:!1}),u.trigger("play")}function n(){a.setState({paused:!0}),u.trigger("pause")}function r(){c.pauseAd(o)}function i(){c.resumeAd(o)}t.log.debug("<VPAIDIntegrator._setupEvents>");var a=this,s=this._createVASTTracker(),u=this.props.player,l=this.state,c=l.adUnit,d=l.vastResponse;this.setState({tracker:s}),c.on("AdSkipped",function(){t.log.trace("<VPAIDIntegrator Event>","AdSkipped"),u.trigger(Do.EVENT.VPAID_AD_SKIPPED),s.trackSkip()}),c.on("AdImpression",function(){t.log.trace("<VPAIDIntegrator Event>","AdImpression"),u.trigger(Do.EVENT.VPAID_AD_IMPRESSION),s.trackImpressions()}),c.on("AdStarted",function(){t.log.trace("<VPAIDIntegrator Event>","AdStarted"),u.trigger(Do.EVENT.VPAID_AD_STARTED),s.trackCreativeView(),e()}),c.on("AdVideoStart",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoStart"),u.trigger(Do.EVENT.VPAID_AD_VIDEO_START),s.trackStart(),e()}),c.on("AdPlaying",function(){t.log.trace("<VPAIDIntegrator Event>","AdPlaying"),u.trigger(Do.EVENT.VPAID_AD_PLAYING),s.trackResume(),e()}),c.on("AdPaused",function(){t.log.trace("<VPAIDIntegrator Event>","AdPaused"),u.trigger(Do.EVENT.VPAID_AD_PAUSED),u.trigger(Do.EVENT.AD_PAUSE_AD),s.trackPause(),n()}),c.on("AdVideoFirstQuartile",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoFirstQuartile"),u.trigger(Do.EVENT.VPAID_AD_VIDEO_FIRST_QUARTILE),s.trackFirstQuartile()}),c.on("AdVideoMidpoint",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoMidpoint"),u.trigger(Do.EVENT.VPAID_AD_VIDEO_MID_POINT),s.trackMidpoint()}),c.on("AdVideoThirdQuartile",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoThirdQuartile"),u.trigger(Do.EVENT.VPAID_AD_VIDEO_THIRD_QUARTILE),s.trackThirdQuartile()}),c.on("AdVideoComplete",function(){t.log.trace("<VPAIDIntegrator Event>","AdVideoComplete"),u.trigger(Do.EVENT.VPAID_AD_VIDEO_COMPLETE),s.trackComplete()}),c.on("AdClickThru",function(e){t.log.trace("<VPAIDIntegrator Event>","AdClickThru"),u.trigger(Do.EVENT.VPAID_AD_CLICK_THRU);var n=e.url,r=e.playerHandles,i=f(n)?n:function(t){var e={CONTENTPLAYHEAD:0};return t?Xi.parseURLMacro(t,e):null}(d.clickThrough);s.trackClick(),r&&i&&window.open(i,"_blank")}),c.on("AdUserAcceptInvitation",function(){t.log.trace("<VPAIDIntegrator Event>","AdUserAcceptInvitation"),u.trigger(Do.EVENT.VPAID_AD_USER_ACCEPT_INVITATION),s.trackAcceptInvitation(),s.trackAcceptInvitationLinear()}),c.on("AdUserClose",function(){t.log.trace("<VPAIDIntegrator Event>","AdUserClose"),u.trigger(Do.EVENT.VPAID_AD_USER_CLOSE),s.trackClose(),s.trackCloseLinear()}),c.on("AdUserMinimize",function(){t.log.trace("<VPAIDIntegrator Event>","AdUserMinimize"),u.trigger(Do.EVENT.VPAID_AD_USER_MINIMIZE),s.trackCollapse()}),c.on("AdError",function(){t.log.trace("<VPAIDIntegrator Event>","AdError"),u.trigger(Do.EVENT.VPAID_AD_ERROR),s.trackErrorWithCode(901)}),c.on("AdVolumeChange",function(){t.log.trace("<VPAIDIntegrator Event>","AdVolumeChange"),u.trigger(Do.EVENT.VPAID_AD_VOLUME_CHANGE),c.getAdVolume(function(t,e){0===e&&s.trackMute(),e>0&&s.trackUnmute()})}),c.on("AdExpandedChange",function(){t.log.trace("< VPAIDIntegrator Event > ","AdExpandedChange"),c.getAdExpanded(function(t,e){e?s.trackExpand():s.trackCollapse()})});var p=T(this._resizeAd,100),h=this.props.autoResize;h&&(Si.addEventListener(window,"resize",p),Si.addEventListener(window,"orientationchange",p)),u.on("vast.resize",p),u.on("vpaid.pauseAd",r),u.on("vpaid.resumeAd",i),u.one(Do.EVENT.VPAID_AD_STARTED,p),u.one(Do.EVENT.VPAID_AD_IMPRESSION,p),u.one(Do.EVENT.AD_END,function(){u.off("vast.resize",p),u.off("vpaid.pauseAd",r),u.off("vpaid.resumeAd",i),u.off(Do.EVENT.VPAID_AD_STARTED,p),u.off(Do.EVENT.VPAID_AD_IMPRESSION,p),h&&(Si.removeEventListener(window,"resize",p),Si.removeEventListener(window,"orientationchange",p))})}},{key:"_addSkipButton",value:function(){}},{key:"_addMuteButton",value:function(){}},{key:"_linkPlayerControls",value:function(){}},{key:"_startAd",value:function(){t.log.debug("<VPAIDIntegrator._startAd>");var e=this.props.player,n=this.state.adUnit;return this.containerEl.style.display="",new Ei(function(r,i){n.startAd(function(n){if(n)return t.log.debug("<VPAIDIntegrator._startAd> error: ",n),void i(n);t.log.debug("<VPAIDIntegrator._startAd> success"),e.trigger(Do.EVENT.VPAID_AD_START),r()})})}},{key:"_finishPlaying",value:function(){t.log.debug("<VPAIDIntegrator._finishPlaying>");var e=this,n=this.props.player,r=this.state.adUnit;return new Ei(function(t,i){function o(o){if(!e.state.ended){if(n.off("vpaid-skip-ad-error"),r.off("AdStopped"),r.off("AdVideoComplete"),r.off("AdError"),e.setState({ended:!0}),n.trigger("vpaid:AdEnd"),o)return i(o);t()}}r.on("AdStopped",function(){o()}),r.on("AdVideoComplete",function(){o()}),r.on("AdError",function(t){o(Ii.VPAID_INTEGRATOR_ERROR_WHILE_WAITING_FINISH.extendsWithData({error:t}))}),n.one("vpaid-skip-ad-error",function(t,e){o(e)})})}},{key:"_createVPAIDAdUnitWrapper",value:function(t,e,n){var r=this.props.player;return new Vo({player:r,adUnit:t,src:e,responseTimeout:n})}},{key:"_createVASTTracker",value:function(){var t=this.state,e=t.tech,n=t.vastResponse;return new po(e.mediaFile.src,n)}},{key:"_resizeAd",value:function(){var e=this.props.player,n=this.state.adUnit,r=this.VIEW_MODE,i=e.el().querySelector(".vjs-tech"),o=Si.getDimension(i),a=e.isFullscreen()?r.FULLSCREEN:r.NORMAL;n.resizeAd(o.width,o.height,a,this._logError),t.log.info("resizeAd","width:",o.width,"height:",o.height)}},{key:"_logError",value:function(e){e&&t.log.error("ERROR: "+e.message,e)}},{key:"expandAd",value:function(){var t=this.props.player,e=this.state.adUnit;t&&e.expandAd(function(){})}},{key:"collapseAd",value:function(){var t=this.props.player,e=this.state.adUnit;t&&e.collapseAd(function(){})}},{key:"_trackError",value:function(t){var e=this.state.vastResponse;Xi.track(e.errorURLMacros,{ERRORCODE:t.code||901})}}]),n}(),Ro.defaultProps={responseTimeout:5e3,VPAID_VERSION:"2.0",autoResize:!0},Io=bo,J(Io.prototype,"_handleAdEnd",[t.autobind],jt(Io.prototype,"_handleAdEnd"),Io.prototype),J(Io.prototype,"_resizeAd",[t.autobind],jt(Io.prototype,"_resizeAd"),Io.prototype),J(Io.prototype,"_logError",[t.autobind],jt(Io.prototype,"_logError"),Io.prototype),Io),wo=function(t){this.controller=t,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adTagUrl=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&this.requestAds()};wo.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.adsLoader.getSettings().setPlayerType("vcplayer"),this.adsLoader.getSettings().setPlayerVersion("2.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1)},wo.prototype.requestAds=function(){var t=new google.ima.AdsRequest;this.controller.getSettings().adTagUrl?t.adTagUrl=this.controller.getSettings().adTagUrl:t.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(t.forceNonLinearFullSlot=!0),t.linearAdSlotWidth=this.controller.getPlayerWidth(),t.linearAdSlotHeight=this.controller.getPlayerHeight(),t.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),t.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),t.setAdWillAutoPlay(this.controller.adsWillAutoplay()),t.setAdWillPlayMuted(this.controller.adsWillPlayMuted()),this.adsLoader.requestAds(t)},wo.prototype.onAdsManagerLoaded=function(t){this.createAdsRenderingSettings(),this.adsManager=t.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.controller.getIsMobile()&&(this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this))),this.autoPlayAdBreaks||this.initAdsManager(),this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},wo.prototype.onAdsLoaderError=function(t){window.console.warn("AdsLoader error: "+t.getError()),this.controller.onErrorLoadingAds(t),this.adsManager&&this.adsManager.destroy()},wo.prototype.initAdsManager=function(){try{var t=this.controller.getPlayerWidth(),e=this.controller.getPlayerHeight();this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.init(t,e,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainer.initialized=!0)}catch(t){this.onAdError(t)}},wo.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var t in this.controller.getSettings().adsRenderingSettings)""!==t&&(this.adsRenderingSettings[t]=this.controller.getSettings().adsRenderingSettings[t])},wo.prototype.onAdError=function(t){var e=void 0!==t.getError?t.getError():t.stack;window.console.warn("Ad error: "+e),this.adsManager.destroy(),this.controller.onAdError(t)},wo.prototype.onAdBreakReady=function(t){this.adBreakReadyListener(t)},wo.prototype.onContentPauseRequested=function(t){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(t)},wo.prototype.onContentResumeRequested=function(){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},wo.prototype.onAllAdsCompleted=function(){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},wo.prototype.onAdLoaded=function(t){t.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},wo.prototype.onAdStarted=function(t){this.currentAd=t.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},wo.prototype.onAdPaused=function(){this.controller.onAdsPaused()},wo.prototype.onAdResumed=function(){this.controller.onAdsResumed()},wo.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},wo.prototype.onAdPlayheadTrackerInterval=function(){var t=this.adsManager.getRemainingTime(),e=this.currentAd.getDuration(),n=e-t;n=n>0?n:0;var r=0,i=void 0;this.currentAd.getAdPodInfo()&&(i=this.currentAd.getAdPodInfo().getAdPosition(),r=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,t,e,i,r)},wo.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},wo.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},wo.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(t){this.onAdError(t)}}},wo.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},wo.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},wo.prototype.onPlayerVolumeChanged=function(t){this.adsManager&&this.adsManager.setVolume(t),this.adMuted=0==t},wo.prototype.onPlayerResize=function(t,e){this.adsManager&&(this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=e,this.adsManager.resize(t,e,google.ima.ViewMode.NORMAL))},wo.prototype.getCurrentAd=function(){return this.currentAd},wo.prototype.setAdBreakReadyListener=function(t){this.adBreakReadyListener=t},wo.prototype.isAdPlaying=function(){return this.adPlaying},wo.prototype.isAdMuted=function(){return this.adMuted},wo.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},wo.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},wo.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},wo.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},wo.prototype.setVolume=function(t){this.adsManager.setVolume(t),this.adMuted=0==t},wo.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainerInitialized=!0,this.adDisplayContainer.initialize()},wo.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},wo.prototype.addEventListener=function(t,e){this.adsManager&&this.adsManager.addEventListener(t,e)},wo.prototype.removeEventListener=function(t,e){this.adsManager&&this.adsManager.removeEventListener(t,e)},wo.prototype.getAdsManager=function(){return this.adsManager},wo.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var Co,Oo,No,Mo,Uo,xo=(Oo=Co=function(e){function n(t){Fn(this,n);var e=zn(this,(n.__proto__||On(n)).call(this,t));return e.settings={locale:null,disableFlashAds:!0,disableCustomPlaybackForIOS10Plus:!0,adTagUrl:null,adsResponse:null,vpaidAllowed:!0,vpaidMode:!0,numRedirects:5,forceNonLinearFullSlot:!1,nonLinearWidth:null,nonLinearHeight:null,adsManagerLoadedCallback:null,adsRenderingSettings:null,debug:!1,timeout:5e3,prerollTimeout:1e3,adLabel:"Advertisement",showControlsForJSAds:!0,AdContainer:null,videoEl:null},e.settings=jn({},e.settings,e.props),e.sdkImpl=new wo(e),e}return Zn(n,Ti),Gn(n,[{key:"requestAds",value:function(){this.sdkImpl.requestAds()}},{key:"onPlayerReadyForPreroll",value:function(){this.sdkImpl.onPlayerReadyForPreroll()}},{key:"initializeAdDisplayContainer",value:function(){this.sdkImpl.initializeAdDisplayContainer()}},{key:"playAdBreak",value:function(){this.sdkImpl.playAdBreak()}},{key:"addEventListener",value:function(t,e){this.sdkImpl.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.sdkImpl.removeEventListener(t,e)}},{key:"getAdsManager",value:function(){return this.sdkImpl.getAdsManager()}},{key:"getSettings",value:function(){return this.settings}},{key:"getAdContainerDiv",value:function(){return this.settings.AdContainer}},{key:"getContentPlayer",value:function(){return this.settings.videoEl}},{key:"getPlayerWidth",value:function(){var t=this.props.player.el().querySelector(".vjs-tech");return Si.getDimension(t).width}},{key:"getPlayerHeight",value:function(){var t=this.props.player.el().querySelector(".vjs-tech");return Si.getDimension(t).height}},{key:"adsWillAutoplay",value:function(){}},{key:"adsWillPlayMuted",value:function(){}},{key:"getContentPlayheadTracker",value:function(){return{currentTime:0,previousTime:0,seeking:!1,duration:0}}},{key:"getIsMobile",value:function(){return t.agent.isMobile}},{key:"onAdsReady",value:function(){t.log.debug("<ImaController.onAdsReady>")}},{key:"onErrorLoadingAds",value:function(){t.log.debug("<ImaController.onErrorLoadingAds>")}},{key:"getPlayerVolume",value:function(){return 1}},{key:"onAdError",value:function(e){t.log.debug("<ImaController.onAdError>",e)}},{key:"onAdBreakStart",value:function(){t.log.debug("<ImaController.onAdBreakStart>")}},{key:"onAdBreakEnd",value:function(){t.log.debug("<ImaController.onAdBreakEnd>")}},{key:"onAllAdsCompleted",value:function(){t.log.debug("<ImaController.onAllAdsCompleted>")}},{key:"onNonLinearAdLoad",value:function(){t.log.debug("<ImaController.onNonLinearAdLoad>")}},{key:"onLinearAdStart",value:function(){t.log.debug("<ImaController.onLinearAdStart>")}},{key:"onNonLinearAdStart",value:function(){t.log.debug("<ImaController.onNonLinearAdStart>")}},{key:"onAdsPaused",value:function(){t.log.debug("<ImaController.onAdsPaused>")}},{key:"onAdsResumed",value:function(){t.log.debug("<ImaController.onAdsResumed>")}},{key:"onAdPlayheadUpdated",value:function(){t.log.debug("<ImaController.onAdPlayheadUpdated>")}},{key:"onContentAndAdsCompleted",value:function(){t.log.debug("<ImaController.onContentAndAdsCompleted>")}},{key:"onNoPostroll",value:function(){t.log.debug("<ImaController.onNoPostroll>")}},{key:"showAdContainer",value:function(){t.log.debug("<ImaController.showAdContainer>")}},{key:"playContent",value:function(){t.log.debug("<ImaController.playContent>")}},{key:"pauseAd",value:function(){this.sdkImpl.pauseAds()}},{key:"resumeAd",value:function(){this.sdkImpl.resumeAds()}}]),n}(),Co.propTypes={player:t.PropTypes.object.isRequired},Oo),jo=(Mo=No=function(e){function n(t){return Fn(this,n),zn(this,(n.__proto__||On(n)).call(this,t))}return Zn(n,Ti),Gn(n,[{key:"loadAdUnit",value:function(e,n,r){t.log.debug("<ImaAdUnit.loadAdUnit>");var i=this.controller=new xo(jn({},this.props,{AdContainer:e,videoEl:n}));i.onAdsReady=function(){t.log.debug("<ImaAdUnit.loadAdUnit> success"),r()},i.onErrorLoadingAds=function(e){t.log.debug("<ImaAdUnit.loadAdUnit> error",e),r(e)}}},{key:"startAd",value:function(){t.log.debug("<ImaAdUnit.startAd>"),this.controller.onPlayerReadyForPreroll()}},{key:"pauseAd",value:function(){this.controller.pauseAd()}},{key:"resumeAd",value:function(){this.controller.resumeAd()}},{key:"onAdError",value:function(t){this.controller.onAdError=t}},{key:"on",value:function(t,e){this.controller.addEventListener(t,e)}},{key:"off",value:function(t,e){this.controller.removeEventListener(t,e)}}]),n}(),No.propTypes={player:t.PropTypes.object.isRequired},Mo),Fo=t.playerconfig.DEFAULT;if(!window.google&&!window.___firstLoadGoogle__){window.___firstLoadGoogle__=!0;var zo=document.getElementsByTagName("head")[0],Wo=document.createElement("script");Wo.type="text/javascript",Wo.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",zo.appendChild(Wo)}var Ho=(Uo=function(e){function n(t){Fn(this,n);var e=zn(this,(n.__proto__||On(n)).call(this,t)),r=e.props.player;return e.containerEl=e._createImaContainerEl(r),r.one(Fo.EVENT.AD_END,e._handleAdEnd),e}return Zn(n,Ti),Gn(n,[{key:"_createImaContainerEl",value:function(){var t=this.props.player,e=document.createElement("div");return Si.addClass(e,"ima-container"),t.overlay.append(e),e}},{key:"_handleAdEnd",value:function(){t.log.debug("<VPAIDIntegrator._handleAdEnd>"),this.containerEl&&(Si.remove(this.containerEl),this.containerEl=null)}},{key:"playAd",value:function(t){var e=this;return this.setState({vastResponse:t}),Ei.resolve().then(function(){return e._loadAdUnit()}).then(function(){return e._setupEvents()}).then(function(){return e._playAdUnit()}).then(function(){return e._finishPlaying()}).catch(function(t){throw t})}},{key:"pauseAd",value:function(){var t=this.props.player,e=this.state.adUnit;t.pause(!0),e&&e.pauseAd()}},{key:"resumeAd",value:function(){var t=this.state.adUnit;t&&t.resumeAd()}},{key:"_loadAdUnit",value:function(){var t=this,e=this.props.player,n=this.state.vastResponse,r=e.el().querySelector(".vjs-tech");return new Ei(function(i,o){var a=new jo(jn({player:e},n));a.loadAdUnit(t.containerEl,r,function(e){if(e)return o(e);t.setState({adUnit:a}),i()})})}},{key:"_setupEvents",value:function(){t.log.debug("<ImaIntegrator._setupEvents>");var e=this.state.adUnit,n=this.props.player;e.on(google.ima.AdEvent.Type.STARTED,function(){n.trigger(Fo.EVENT.IMA_AD_STARTED)})}},{key:"_playAdUnit",value:function(){var t=this.state.adUnit,e=this.props.player;t.startAd(),e.trigger(Fo.EVENT.IMA_AD_START)}},{key:"_finishPlaying",value:function(){t.log.debug("<ImaIntegrator._finishPlaying>");var e=this.state.adUnit;return new Ei(function(t,n){function r(e){if(e)return n(e);t()}e.on(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){r()}),e.on(google.ima.AdErrorEvent.Type.AD_ERROR,function(t){r(t)}),e.onAdError(function(t){r(t)})})}}]),n}(),function(t,e,n,r,i){var o={};Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null)}(Uo.prototype,"_handleAdEnd",[t.autobind],jt(Uo.prototype,"_handleAdEnd"),Uo.prototype),Uo),Bo=function(t,e,n){e in t?Lt.f(t,e,pt(0,n)):t[e]=n};Ot(Ot.S+Ot.F*!Xr(function(t){}),"Array",{from:function(t){var e,n,r,i,o=Ee(t),a="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,l=void 0!==u,c=0,d=_r(o);if(l&&(u=Rt(u,s>2?arguments[2]:void 0,2)),void 0==d||a==Array&&Ar(d))for(n=new a(e=qt(o.length));e>c;c++)Bo(n,c,l?u(o[c],c):o[c]);else for(i=d.call(o),n=new a;!(r=i.next()).done;c++)Bo(n,c,l?fr(i,u,[r.value,c],!0):r.value);return n.length=c,n}});var Go=Vt.Array.from,qo=r(function(t){t.exports={default:Go,__esModule:!0}});n(qo);var Ko,Qo,Yo,Jo,Xo,$o,Zo,ta,ea,na,ra,ia,oa,aa,sa,ua,la,ca,da,pa,ha,fa,va,ya,Aa,ga,_a,Ea=n(r(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(qo);e.default=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return(0,n.default)(t)}})),ma=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Ei(function(i,o){it.xhr(e,function(a,s,u){200===s.statusCode?i(u):n&&r<n?t(e,n,++r).then(function(t){i(t)}).catch(function(t){o(t)}):o(a)})})},Ta=(Qo=Ko=function(e){function n(t){Fn(this,n);var e=zn(this,(n.__proto__||On(n)).call(this,t));return e.isPassBack=!1,e.errorURLMacros=[],e}return Zn(n,Ti),Gn(n,[{key:"_filterAdChain",value:function(){var t=mi(ur.mark(function t(e){var n,r,i;return ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],r=void 0;e.length;)try{i=this._buildVASTResponse(e.shift()),n.push(i)}catch(t){r=t}if(!n.length){t.next=5;break}return t.abrupt("return",n);case 5:throw r;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"adgetVASTResponse",value:function(){var t=mi(ur.mark(function t(e){var n,r=this;return ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.abrupt("return",Ei.resolve().then(function(){return r._getVASTAd(e)}).then(function(t){return n._filterAdChain(t)}).catch(function(t){if(t.ima)return[t];throw t}));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getVASTResponse",value:function(){var t=mi(ur.mark(function t(e){var n,r,i;return ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw Ii.VASTClIENT_MISS_AD_TAG_URL;case 2:n=[],r=[e];for(i in r)n.push(this.adgetVASTResponse(r[i]));return t.abrupt("return",Ei.all(n.map(function(t){return t.catch(function(){return[]})})).then(function(t){var e=[],n=[].concat(Ea(t[0]));for(var r in n)if(n[r].ads)e.push(n[r]);else if(n[r].ima)return n[r];if(e.length)return e;throw n[0]}));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"validateVASTTree",value:function(t){var e=Zi.attr(t,"version");if(!t.ad)throw Ii.ERROR_303;if(e&&3!=e&&2!=e)throw Ii.ERROR_102}},{key:"_buildVASTResponse",value:function(t){var e=new co;return function(t,e){e.forEach(function(e){t.addAd(e)})}(e,t),function(t){if(!t.hasLinear())throw Ii.VASTClIENT_AD_TYPE_NOT_SUPPORT;if(void 0===t.duration)throw Ii.VASTClIENT_MISSING_DURATIOn}(e),e}},{key:"_getVastTree",value:function(){var e=mi(ur.mark(function e(n){var r,i;return ur.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===n.indexOf("googleads.g.doubleclick.net")){e.next=2;break}throw{adTagUrl:n,adsResponse:null,ima:!0};case 2:return e.next=4,this._requestVASTXml(n);case 4:r=e.sent,i=void 0,e.prev=6,i=Zi.toJXONTree(r),t.log.debug("built JXONTree from VAST response:",i),d(i.ad)?i.ads=i.ad:i.ad?i.ads=[i.ad]:i.ads=[],e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(6),Ii.ERROR_100;case 15:return this.validateVASTTree(i),e.abrupt("return",i);case 17:case"end":return e.stop()}},e,this,[[6,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_getVASTAd",value:function(){var t=mi(ur.mark(function t(e){var n,r;return ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.prev=2,t.next=5,this._getVastTree(e);case 5:n=t.sent,t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(2),t.t0;case 12:return r=n&&d(n.ads)?n.ads:null,t.abrupt("return",this._waterfallHandler(r).catch(function(t){if(t.ima)throw{adTagUrl:e,ima:!0}}));case 14:case"end":return t.stop()}},t,this,[[2,8]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_getAd",value:function(){var t=mi(ur.mark(function t(e,n){var r,i,o;return ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>=this.props.WRAPPER_LIMIT)){t.next=2;break}throw Ii.VASTClIENT_WRAPPER_LIMIT_REACHED;case 2:if(r=void 0,!p(e)){t.next=10;break}return t.next=6,this._getVastTree(e);case 6:i=t.sent,r=i.ad,t.next=11;break;case 10:r=e;case 11:if(o=this._buildAd(r),n.push(o),!o.wrapper){t.next=16;break}if(-1!==o.wrapper.VASTAdTagURI.indexOf("//")){t.next=16;break}throw Ii.ERROR_301;case 16:if(!o.wrapper){t.next=20;break}if(-1===o.wrapper.VASTAdTagURI.indexOf("googleads.g.doubleclick.net")){t.next=19;break}throw{adTagUrl:null,adsResponse:n,ima:!0};case 19:return t.abrupt("return",this._getAd(o.wrapper.VASTAdTagURI,n));case 20:return t.abrupt("return",n);case 21:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_buildAd",value:function(t){var e=new lo(t);return this._validateAd(e),e}},{key:"_validateAd",value:function(t){var e=t.wrapper,n=t.inLine;if(n&&e)throw Ii.VALID_AD_ERROR_1;if(!n&&!e)throw Ii.VALID_AD_ERROR_2;if(n&&!n.isSupported())throw Ii.VALID_AD_ERROR_3;if(e&&!e.VASTAdTagURI)throw Ii.VALID_AD_ERROR_4}},{key:"_waterfallHandler",value:function(){var t=mi(ur.mark(function t(e){var n,r,i,o;return ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[];e.length;)r=this._getAd(e.shift(),[]).catch(function(t){return{error:t}}),n.push(r);return t.next=4,Ei.all(n);case 4:if(i=t.sent,!(o=i.filter(function(t){return!t.error})).length){t.next=8;break}return t.abrupt("return",o);case 8:throw i[0].error;case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_requestVASTXml",value:function(t){return new Ei(function(e,n){ma({uri:t,withCredentials:!1,method:"GET"},0).then(function(t){t?e(t):n(Ii.ERROR_301)}).catch(function(){n(Ii.ERROR_301)})})}}]),n}(),Ko.defaultProps={WRAPPER_LIMIT:5},Qo),ka=t.playerconfig.DEFAULT,Sa=(Xo=Jo=function(e){function n(t){Fn(this,n);var e=zn(this,(n.__proto__||On(n)).call(this,t)),r=e.props.player;return e._volumeChangeVpaid=e._volumeChangeVpaid.bind(e),e._savePlayerSnapshot(),_o.once(r,[ka.EVENT.AD_END],e._handleRestorePlayer),e}return Zn(n,Ti),Gn(n,[{key:"_savePlayerSnapshot",value:function(){var t=this.props.player,e=this,n=void 0;t.on(ka.EVENT.VPAID_AD_VOLUME_CHANGE,this._volumeChangeVpaid),t.one("snapshotPlayer",function(){var r=!t.paused()||"postroll"!==t.vastAd.adPosition();n={playing:r,ended:t.ended(),duration:t.duration(),src:t.currentSrc(),currentTime:t.currentTime(),type:t.currentType(),volume:t.volume(),muted:t.muted()},e.setState({snapshot:n}),r&&t.pause()})}},{key:"_volumeChangeVpaid",value:function(){var t=this.state.snapshot;this.props.player.vastAd.getAdVolume().then(function(e){t.muted=0===e})}},{key:"snapshot",value:function(){return this.state.snapshot}},{key:"_handleRestorePlayer",value:function(){var e=this.state.snapshot,n=this.props.player;if(n.off(ka.EVENT.VPAID_AD_VOLUME_CHANGE,this._volumeChangeVpaid),e){var r=this._needRestoreSrc(e),i=e.playing;if(n.vastAd=null,!r)return n.currentTime(e.currentTime),void this._resumePlayback(i);n.one("canplay",this._tryToResume.bind(this,e)),this._ensureCanplayEvtGetsFired(),t.agent.isMobile||n.reset(),n.src({src:e.src,type:e.type}),n.currentTime(e.currentTime),n.trigger("waiting"),t.agent.isMobile||n.load(),this._resumePlayback(i)}else this._resumePlayback(i)}},{key:"_tryToResume",value:function(e){var n=this.props.player,r=this;try{n.currentTime()!==e.currentTime?(n.one("seeked",function(){r._resumePlayback(e.playing)}),n.currentTime(e.currentTime)):this._resumePlayback(e.playing)}catch(e){t.log.warn("Failed to resume the content after an advertisement",e)}}},{key:"_ensureCanplayEvtGetsFired",value:function(){var t=this.props.player,e=setTimeout(function(){t.trigger("canplay")},1e3);t.one("canplay",function(){clearTimeout(e)})}},{key:"_resumePlayback",value:function(t){var e=this.props.player,n=this.state.snapshot,r=n.currentTime,i=n.muted,o=n.volume;this.triggerRestorePlayback_||(e.trigger(ka.EVENT.AD_RESTORED_PLAYBACK),this.triggerRestorePlayback_=!0),t&&(e.currentTime(r),e.muted(i),e.volume(o),setTimeout(function(){e.play(!0)},0))}},{key:"_needRestoreSrc",value:function(e){var n=this.props.player,r=n.src();if(!n.vastAd.adUnit())return!1;var i=n.vastAd.adUnit().type;return!r||(r!==e.src||(!!t.agent.isIOS||"VAST"!==i&&"VPAID"!==i&&(!/mediasource|blob/.test(r)&&(!!/m3u8/gi.test(r)||r!==e.src))))}}]),n}(),Jo.propTypes={player:t.PropTypes.object.isRequired,vastAd:t.PropTypes.object.isRequired,preLoaded:t.PropTypes.bool},Yo=Xo,X(Yo.prototype,"_handleRestorePlayer",[t.autobind],jt(Yo.prototype,"_handleRestorePlayer"),Yo.prototype),X(Yo.prototype,"_tryToResume",[t.autobind],jt(Yo.prototype,"_tryToResume"),Yo.prototype),Yo),Pa=t.playerconfig.DEFAULT,Va=new Ta,Ia={INIT:"INIT",PENDING:"PENDING",WATING:"WATING",DISPOSE:"DISPOSE"},Ra=(ta=Zo=function(e){function n(t){Fn(this,n);var e=zn(this,(n.__proto__||On(n)).call(this,t));return e.state={adState:Ia.INIT,adIntegrator:null,paused:!1,restorePlayer:null},e.props.player.vastAd=e,e.firstAd=!1,e._initAd(),e}return Zn(n,Ti),Gn(n,[{key:"adPosition",value:function(){return this.props.type}},{key:"skipAd",value:function(){var t=this.state.adIntegrator;t&&t.skipAd()}},{key:"clickThrough",value:function(){var t=this.state.adIntegrator;t&&t.clickThrough()}},{key:"getAdVolume",value:function(){var t=this.state.adIntegrator;if(t)return t.getAdVolume()}},{key:"getAdExpanded",value:function(){var t=this.state.adIntegrator;if(t)return t.getAdExpanded()}},{key:"setAdVolume",value:function(t){var e=this.state.adIntegrator;e&&e.setAdVolume(t)}},{key:"adUnit",value:function(){var t=this.state.adIntegrator;if(t)return t}},{key:"paused",value:function(){return this.state.paused}},{key:"getPlayerAdUnit",value:function(){return this.state.adIntegrator.getPlayerAdUnit()}},{key:"isPaused",value:function(){return this.state.adIntegrator.isPaused()}},{key:"vastResponse",value:function(){var t=this.state.vastResponse;return t}},{key:"_initAd",value:function(){var e=this,n=this.props.player;n.on(Pa.EVENT.USER_SKIP_AD,this.skipAd),Ei.resolve().then(function(){return e._setAdCancelTimeout()}).then(function(){return e._getVastResponse()}).then(function(t){return e.playAd(t)}).then(function(){var r=e.state,i=r.restorePlayer,o=r.adIntegrator;t.log.trace("VastPlugin > ad end"),i.snapshot().muted=o.getPlayerAdUnit().muted(),i.snapshot().volume=o.getPlayerAdUnit().volume(),n.trigger(Pa.EVENT.AD_END)}).catch(function(e){t.log.trace("VastPlugin > end with error:",e),n.trigger(Pa.EVENT.AD_END)})}},{key:"prepareForPlayAd",value:function(){this._prepareForAd(),this._setUpRestorePlayer()}},{key:"_prepareForAd",value:function(){var t=this,e=this.props.player,n=this.origPlay=e.play,r=this.origPlay=e.pause;e.play=function(e){var r=t.state.adIntegrator;e?n.apply(this,arguments):r&&(t.setState({paused:!1}),r.resumeAd())},e.pause=function(e){var n=t.state.adIntegrator;e?r.apply(this,arguments):n&&(t.setState({paused:!0}),n.pauseAd())},e.one(Pa.EVENT.AD_END,function(){e.off(Pa.EVENT.USER_SKIP_AD,t.skipAd),e.play=n,e.pause=r})}},{key:"playAd",value:function(){var t=mi(ur.mark(function t(e){var n,r,i,o,a,s,u;return ur.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props.player,r=this.state.adState,i=n.options().params.adPod,r===Ia.INIT){t.next=5;break}return t.abrupt("return");case 5:if(!e||!e.length){t.next=33;break}o=void 0,a=void 0,s=0;case 9:if(!(s<e.length)){t.next=32;break}if(u=e[s],t.prev=11,!0!==i){t.next=19;break}return n.trigger(Pa.EVENT.AD_VASTRESPONSE,u),t.next=16,this._playMutilAd(u);case 16:a=t.sent,t.next=24;break;case 19:return n.trigger(Pa.EVENT.AD_VASTRESPONSE,u),t.next=22,this._playOneAd(u);case 22:return a=t.sent,t.abrupt("return",a);case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(11),o=t.t0;case 29:s++,t.next=9;break;case 32:return t.abrupt("return",o);case 33:return t.abrupt("return",this._playOneAd(e));case 34:case"end":return t.stop()}},t,this,[[11,26]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_playMutilAd",value:function(t){var e=this.props.player;this.setState({vastResponse:t,adIntegrator:null});var n=void 0;n=Ho&&this._isIMA(t)?new Ho(this.props):this._isVPAID(t)?new Lo(this.props):new So(this.props),this.setState({adIntegrator:n});var r=!1;return e.one(Pa.EVENT.VPAID_AD_START,function(){r=!0}),n.playAd(t).catch(function(t){if(!r)throw t})}},{key:"_playOneAd",value:function(t){var e=this.props.player;this.setState({vastResponse:t});var n=void 0;n=Ho&&this._isIMA(t)?new Ho(this.props):this._isVPAID(t)?new Lo(this.props):new So(this.props),this.setState({adIntegrator:n}),e.trigger(Pa.EVENT.AD_PLAY,t);var r=!1;return e.one(Pa.EVENT.VPAID_AD_START,function(){r=!0}),n.playAd(t).catch(function(t){if(!r)throw t})}},{key:"snapshot",value:function(){return this.state.restorePlayer.snapshot()}},{key:"_setUpRestorePlayer",value:function(){var t=this.props,e=t.player,n=t.preLoaded,r=new Sa({player:e,vastAd:this,preLoaded:n});this.setState({restorePlayer:r})}},{key:"_setAdCancelTimeout",value:function(){}},{key:"_getVastResponse",value:function(){var t=this.props,e=t.adTagUrl,r=t.vastResponse,i=t.ima;return i?Ei.resolve({ima:!0,adTagUrl:i}):r?Ei.resolve(r):n.getVASTResponse(e)}},{key:"_isVPAID",value:function(t){var e,n,r=t.mediaFiles;for(e=0,n=r.length;e<n;e++)if(Xi.isVPAID(r[e])&&r[e].isSupported())return!0;return!1}},{key:"_isIMA",value:function(t){return!!t.ima}}],[{key:"getVASTResponse",value:function(t){return Va.getVASTResponse(t)}}]),n}(),Zo.propTypes={player:t.PropTypes.object.isRequired,type:t.PropTypes.string.isRequired,adTagUrl:t.PropTypes.string,adTagXML:t.PropTypes.object,ima:t.PropTypes.string,preLoaded:t.PropTypes.bool,skipoffset:t.PropTypes.number,vastResponse:t.PropTypes.array},Zo.defaultProps={timeout:500,autostart:!0},$o=ta,$($o.prototype,"skipAd",[t.autobind],jt($o.prototype,"skipAd"),$o.prototype),$($o.prototype,"clickThrough",[t.autobind],jt($o.prototype,"clickThrough"),$o.prototype),$o),ba=(na=ea=function(t){function e(t){return Fn(this,e),zn(this,(e.__proto__||On(e)).call(this,t))}return Zn(e,t),Gn(e,[{key:"getDefaultProps",value:function(){var t=this.constructor.defaultProps;return jn({},t,{})}}]),Gn(e,[{key:"initAd",value:function(t){var e=t.vastUrl,n=t.vastResponse,r=t.ima,i=t.type,o=t.preLoaded,a=this,s=this.props.player,u=s.play,l=!1;s.play=function(){l||(l=!0,s.play=u,a._initAd({vastUrl:e,vastResponse:n,ima:r,type:i,preLoaded:o}))},s.play()}},{key:"_initAd",value:function(t){var e=t.vastUrl,n=t.vastResponse,r=t.ima,i=t.type,o=t.preLoaded,a=this.props.player;a.vastAd||new Ra({player:a,adTagUrl:e,vastResponse:n,ima:r,type:i,preLoaded:o})}},{key:"getVastRespone",value:function(t){return Ra.getVASTResponse(t)}}]),e}(t.Plugin),ea.defaultProps={adsCancelTimeout:5e3},na),Da={PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll"},La=it.getComponent("Player"),wa=t.playerconfig.DEFAULT,Ca=(oa=ia=function(e){function n(e){Fn(this,n);var r=zn(this,(n.__proto__||On(n)).call(this,e)),i=r.props,o=i.player,a=i.enableAd,s=o.options().params;return a?(s.adPostLoad&&!t.agent.isIOS?o.on("preparePostrollVast",r.preparePostroll):o.on(wa.EVENT.AD_ORDER_START_POSTROLL,r.startPostroll),o.on("prepareMidrollVast",r.handlePrepareMidroll),s.adPreLoad&&!t.agent.isIOS?o.one("updateMediaInfo",r.handleLoadAdPreroll):o.one("play",r.preparePreroll),r):zn(r)}return Zn(n,ba),Gn(n,[{key:"getDefaultProps",value:function(t){var e=t.player.options(),n=e.params,r=e.plugins,i=n.ads,o=n.vast,a=n.ima,s=this.constructor.defaultProps,u={};return!r.kinghubAdmicroADSPlugin&&La.prototype.kinghubAdmicroADSPlugin&&(u.enableAd=!1),(o||a)&&(u.enableAd=!0),!1===i&&(u.enableAd=!1),jn({},s,u)}}]),Gn(n,[{key:"preparePreroll",value:function(){var t=this,e=this.props.player,n=e.options().params;if(!n.nopre){var r=n.ima,i=t._getVastInAdmicro({type:Da.PREROLL,position:0});i&&e.one("timeupdate",function(){t.initAd({vastUrl:i,vastResponse:void 0,ima:r,type:"preroll"})})}}},{key:"preparePostroll",value:function(){var t=this,e=t._getVastInAdmicro({type:Da.POSTROLL,position:0});e&&this.getVastRespone(e).then(function(e){var n=void 0,r=void 0;if("string"==typeof e)n=e;else{if("object"!==(void 0===e?"undefined":wn(e)))return;r=e}t.initAd({vastUrl:n,vastResponse:r,type:Da.POSTROLL,preLoaded:!0})})}},{key:"handleLoadAdPreroll",value:function(){var t=this,e=this.props.player.options().params;if(!e.nopre){var n=e.ima,r=t._getVastInAdmicro({type:Da.PREROLL,position:0});r&&this.getVastRespone(r).then(function(e){var r=void 0,i=void 0;if("string"==typeof e)r=e;else{if("object"!==(void 0===e?"undefined":wn(e)))return;i=e}t.initAd({vastUrl:r,vastResponse:i,ima:n,type:"preroll",preLoaded:!0})})}}},{key:"startMidroll",value:function(t,e){var n=void 0,r=void 0;if("string"==typeof e)n=e;else{if("object"!==(void 0===e?"undefined":wn(e)))return;r=e}this.initAd({vastUrl:n,vastResponse:r,type:"midroll"})}},{key:"handlePrepareMidroll",value:function(e,n){var r=this.props.player,i=this,o=r.options().params,a=this._getVastInAdmicro({type:Da.MIDROLL,position:n});a?this.getVastRespone(a).then(function(e){r.trigger(wa.EVENT.AD_MIDROLL_VASTRESPONSE,e);var n=void 0,a=void 0;if("string"==typeof e)n=e;else{if("object"!==(void 0===e?"undefined":wn(e)))return;a=e}o.adMidLoad&&!t.agent.isIOS?i.initAd({vastUrl:n,vastResponse:a,type:"midroll",preLoaded:!0}):r.one(wa.EVENT.AD_ORDER_START_MIDROLL,i.startMidroll)}).catch(function(){r.trigger(wa.EVENT.AD_MIDROLL_VASTRESPONSE)}):r.trigger(wa.EVENT.AD_MIDROLL_VASTRESPONSE)}},{key:"startPostroll",value:function(){var t=this._getVastInAdmicro({type:Da.POSTROLL,position:10});t&&this._initAd({vastUrl:t,type:"postroll"})}},{key:"_getVastInAdmicro",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props.player,n=e.options().params;return La.prototype.kinghubAdmicroADSPlugin?La.prototype.kinghubAdmicroADSPlugin.call(e,t):n.vast?n.vast:void 0}}]),n}(),ia.defaultProps={adsCancelTimeout:5e3,enableAd:!0},ra=oa,Z(ra.prototype,"preparePreroll",[t.autobind],jt(ra.prototype,"preparePreroll"),ra.prototype),Z(ra.prototype,"preparePostroll",[t.autobind],jt(ra.prototype,"preparePostroll"),ra.prototype),Z(ra.prototype,"handleLoadAdPreroll",[t.autobind],jt(ra.prototype,"handleLoadAdPreroll"),ra.prototype),Z(ra.prototype,"startMidroll",[t.autobind],jt(ra.prototype,"startMidroll"),ra.prototype),Z(ra.prototype,"handlePrepareMidroll",[t.autobind],jt(ra.prototype,"handlePrepareMidroll"),ra.prototype),Z(ra.prototype,"startPostroll",[t.autobind],jt(ra.prototype,"startPostroll"),ra.prototype),ra),Oa=t.playerconfig.DEFAULT,Na=(ua=sa=function(e){function n(){var t,e,r,i;Fn(this,n);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=r=zn(this,(t=n.__proto__||On(n)).call.apply(t,[this].concat(a))),r.state={timeLeft:6,started:!1,skipped:!1},i=e,zn(r,i)}return Zn(n,e),Gn(n,[{key:"componentDidMount",value:function(){this.intervalRemainingTime_=setInterval(this.update,200)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalRemainingTime_)}},{key:"_getAdDuration",value:function(){var t=this.props.player,e=this;t.vastAd.adUnit().getAdDuration().then(function(t){e.adDuration=t}),543706===t.vastAd.vastResponse().ads[0].id&&(this.skipOffset=8)}},{key:"update",value:function(){var t=this.props,e=t.player,n=t.skipOffset;if(e.vastAd){var r=e.vastAd.adUnit(),i=this;this.adDuration?(this.skipOffset=r.getSkipOffSet(),n=this.skipOffset||n,r.getAdRemainingTime().then(function(t){var e=Math.ceil(n+t-i.adDuration);i.setState({timeLeft:e,started:!0})})):this._getAdDuration()}}},{key:"_skipAd",value:function(e){e.preventDefault();var n=this.state,r=n.timeLeft,i=n.skipped;r>0||i||(this.setState({skipped:!0}),t.log.trace("<SkipToggle._skipAd>"),this.props.player.trigger(Oa.EVENT.USER_SKIP_AD))}},{key:"render",value:function(){var t=void 0,e=this.state,n=e.timeLeft,r=e.skipped,i=e.started,o=n>0?n+" giây":"Bỏ Qua";return"Bỏ Qua"===o&&(t="ad-canskip"),r||!i?null:ot.createElement("button",{className:"ad-skip "+t+" vcplayer-button",onClick:this._skipAd},o)}}]),n}(e.Component),sa.propTypes={player:t.PropTypes.object.isRequired,skipOffset:t.PropTypes.number},sa.defaultProps={skipOffset:6},aa=ua,tt(aa.prototype,"update",[t.autobind],jt(aa.prototype,"update"),aa.prototype),tt(aa.prototype,"_skipAd",[t.autobind],jt(aa.prototype,"_skipAd"),aa.prototype),aa),Ma=t.playerconfig.DEFAULT,Ua=(da=ca=function(t){function e(){var t,n,r,i;Fn(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=zn(this,(t=e.__proto__||On(e)).call.apply(t,[this].concat(a))),r.state={url:null},i=n,zn(r,i)}return Zn(e,t),Gn(e,[{key:"componentDidMount",value:function(){var t=this.props.player;"VPAID"!==t.vastAd.adUnit().type&&t.trigger(Ma.EVENT.VAST_AD_VIDEO_SHOW)}},{key:"updateBlocker",value:function(t){this.setState({url:t})}},{key:"_clickthrough",value:function(t){var e=this.props.player,n=e.vastAd.adUnit();if(n.isPaused())return e.play(),t.stopPropagation(),!1;n.clickThrough()}},{key:"render",value:function(){var t=this.state.url;return t?ot.createElement("a",{className:"ad-clickthrough-blocker",onClick:this._clickthrough,href:t,target:"_blank",rel:"noopener noreferrer"}):null}}]),e}(e.Component),ca.propTypes={player:t.PropTypes.object.isRequired},la=da,et(la.prototype,"updateBlocker",[t.autobind],jt(la.prototype,"updateBlocker"),la.prototype),et(la.prototype,"_clickthrough",[t.autobind],jt(la.prototype,"_clickthrough"),la.prototype),la),xa=(fa=ha=function(t){function e(){var t,n,r,i;Fn(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=zn(this,(t=e.__proto__||On(e)).call.apply(t,[this].concat(a))),r.state={muted:!0},i=n,zn(r,i)}return Zn(e,t),Gn(e,[{key:"componentDidMount",value:function(){var t=this.props.player,e=this;this.type=t.vastAd.adUnit().type;var n=t.vastAd.getPlayerAdUnit(),r=t.vastAd,i=r.snapshot(),o=i.muted?0:i.volume;try{r.setAdVolume(o).then(function(){r.getAdVolume().then(function(t){e.setState({firstVolume:t})})})}catch(t){}var a=i.muted;this.setState({muted:a}),t.setTimeout(function(){e.setState({firstVolume:o})},1e3),n.on("volumechange",this.update),this.update()}},{key:"update",value:function(){var t=this,e=this.props.player.vastAd,n=e.getPlayerAdUnit();e.getAdVolume().then(function(e){var r=n.muted();0===e||r?t.setState({muted:!0}):t.setState({muted:!1})})}},{key:"handleClick",value:function(t){t.preventDefault();var e=this.props.player,n=this.state,r=n.firstVolume,i=n.muted,o=e.vastAd,a=o.getPlayerAdUnit();o.getAdVolume().then(function(t){var e=0===r?.5:r;a.muted(!i),0===t||i?o.setAdVolume(e):o.setAdVolume(0)})}},{key:"render",value:function(){var t=this,e=this.props.player,n=this.state.muted;return e.el_.clientWidth<=170||!e.options().params.adMuteToggle?null:ot.createElement("div",{className:"vcplayer-ad-btn-mute",onClick:function(e){return t.handleClick(e)}},ot.createElement("button",null,ot.createElement("span",{className:"vcplayer-ad-qmtwbs-base"}),ot.createElement("span",{className:"vcplayer-ad-qmtwbs-level"})),n?ot.createElement("span",{className:"vcplayer-ad-line-mute"}):null)}}]),e}(e.Component),ha.propTypes={player:t.PropTypes.object.isRequired},pa=fa,nt(pa.prototype,"update",[t.autobind],jt(pa.prototype,"update"),pa.prototype),nt(pa.prototype,"handleClick",[t.autobind],jt(pa.prototype,"handleClick"),pa.prototype),pa),ja=t.playerconfig.DEFAULT,Fa=(ya=va=function(t){function e(){var t,n,r,i;Fn(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=zn(this,(t=e.__proto__||On(e)).call.apply(t,[this].concat(a))),r.state={url:null},i=n,zn(r,i)}return Zn(e,t),Gn(e,[{key:"componentDidMount",value:function(){var t=this.props.player;"VPAID"!==t.vastAd.adUnit().type&&t.trigger(ja.EVENT.VAST_AD_VIDEO_SHOW)}},{key:"render",value:function(){var t=this.props.player;return ot.createElement("div",{className:"Ad-controlBar"},ot.createElement(xa,{player:t}))}}]),e}(e.Component),va.propTypes={player:t.PropTypes.object.isRequired},ya),za=t.playerconfig.DEFAULT,Wa=(_a=ga=function(t){function e(){var t,n,r,i;Fn(this,e);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=zn(this,(t=e.__proto__||On(e)).call.apply(t,[this].concat(a))),r.state={isShow:!1},i=n,zn(r,i)}return Zn(e,t),Gn(e,[{key:"componentDidMount",value:function(){var t=this.props.player;t.on(za.EVENT.AD_START,this._handleAdStart),t.on(za.EVENT.AD_END,this._handleAdEnd),t.on(za.EVENT.USER_SKIP_AD,this._handleAdSkip),t.on(za.EVENT.VAST_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),t.on(za.EVENT.VPAID_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),t.on(za.EVENT.VAST_AD_VIDEO_START,this._handleVastStart),t.on(za.EVENT.VPAID_AD_START,this._handleVpaidStart)}},{key:"componentWillUnmount",value:function(){var t=this.props.player;t.off(za.EVENT.AD_START,this._handleAdStart),t.off(za.EVENT.AD_END,this._handleAdEnd),t.off(za.EVENT.USER_SKIP_AD,this._handleAdSkip),t.off(za.EVENT.VAST_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),t.off(za.EVENT.VPAID_AD_VIDEO_COMPLETE,this._handleAdMediaEnd),t.off(za.EVENT.VAST_AD_VIDEO_START,this._handleVastStart),t.off(za.EVENT.VPAID_AD_START,this._handleVpaidStart)}},{key:"_handleAdStart",value:function(){}},{key:"_handleAdMediaEnd",value:function(){this.setState({isShow:!1})}},{key:"_handleAdSkip",value:function(){this.setState({isShow:!1})}},{key:"_handleAdEnd",value:function(){this.setState({isShow:!1})}},{key:"_handleVastStart",value:function(){this.setState({isShow:!0})}},{key:"_handleVpaidStart",value:function(){this.setState({isShow:!0})}},{key:"render",value:function(){var t=this;return this.state.isShow?ot.createElement("div",{className:"ad-container",style:{width:"100%",height:"100%"}},ot.createElement(Ua,{key:"clickThrough",player:this.props.player,ref:function(e){t.clickThrough=e}}),ot.createElement(Na,{key:"skipToggle",player:this.props.player,ref:function(e){t.skipToggle=e}}),ot.createElement(Fa,{key:"adControlBar",player:this.props.player,ref:function(e){t.adControlBar=e}}),","):null}}]),e}(e.Component),ga.propTypes={player:t.PropTypes.object.isRequired},Aa=_a,rt(Aa.prototype,"_handleAdStart",[t.autobind],jt(Aa.prototype,"_handleAdStart"),Aa.prototype),rt(Aa.prototype,"_handleAdMediaEnd",[t.autobind],jt(Aa.prototype,"_handleAdMediaEnd"),Aa.prototype),rt(Aa.prototype,"_handleAdSkip",[t.autobind],jt(Aa.prototype,"_handleAdSkip"),Aa.prototype),rt(Aa.prototype,"_handleAdEnd",[t.autobind],jt(Aa.prototype,"_handleAdEnd"),Aa.prototype),rt(Aa.prototype,"_handleVastStart",[t.autobind],jt(Aa.prototype,"_handleVastStart"),Aa.prototype),rt(Aa.prototype,"_handleVpaidStart",[t.autobind],jt(Aa.prototype,"_handleVpaidStart"),Aa.prototype),Aa);it.Vast=Ra;it.registerPlugin("AdsPlayerPlugin",function(){var t=this;new Ca({player:t}),t.one("ready",function(){var e=this,n=ot.createElement(Wa,{key:"ad",player:t,ref:function(t){e.container.ad=t}});t.container.addChild(n);var r=document.createElement("div");r.style.background="rgba(0,0,0,0.7)",r.style.transition="all 1s ease 0s",r.style.opacity=0,Si.addClass(r,"overlay-ad"),t.overlay.append(r)})})})}();